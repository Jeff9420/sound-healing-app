<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scroll Fix Diagnostic</title>
    <style>
        body {
            font-family: monospace;
            background: #0b0704;
            color: #fdf3e5;
            padding: 2rem;
            line-height: 1.8;
        }
        .info {
            background: rgba(102, 102, 255, 0.1);
            border-left: 4px solid #6666ff;
            padding: 1rem;
            margin: 1rem 0;
        }
        .error {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid #ef4444;
            padding: 1rem;
            margin: 1rem 0;
        }
        .success {
            background: rgba(34, 197, 94, 0.1);
            border-left: 4px solid #22c55e;
            padding: 1rem;
            margin: 1rem 0;
        }
        button {
            background: #6666ff;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin: 1rem 0.5rem 1rem 0;
        }
        button:hover {
            background: #5555ee;
        }
        pre {
            background: rgba(11, 7, 4, 0.9);
            border: 1px solid rgba(253, 243, 229, 0.2);
            padding: 1rem;
            overflow-x: auto;
            border-radius: 6px;
        }
    </style>
</head>
<body>
    <h1>üîç SaaS Landing Page Scroll Diagnostic</h1>

    <button onclick="runDiagnostic()">üî¨ Run Diagnostic</button>
    <button onclick="applyFix()">üîß Apply Fix</button>
    <button onclick="window.open('/saas-landing.html', '_blank')">üåê Open Landing Page</button>

    <div id="results"></div>

    <script>
        function log(message, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = type;
            div.innerHTML = message;
            results.appendChild(div);
        }

        function runDiagnostic() {
            document.getElementById('results').innerHTML = '';

            log('<h2>üîç Running Diagnostic...</h2>', 'info');

            // Open landing page in a new window
            const win = window.open('/saas-landing.html', 'landingPage');

            setTimeout(() => {
                try {
                    const doc = win.document;
                    const body = doc.body;
                    const html = doc.documentElement;

                    log('<h3>üìè Page Dimensions</h3>', 'info');
                    log(`<pre>
Document Height: ${body.scrollHeight}px
Window Height: ${win.innerHeight}px
Should Scroll: ${body.scrollHeight > win.innerHeight}
</pre>`, 'info');

                    log('<h3>üíæ Computed Styles</h3>', 'info');
                    const bodyStyle = win.getComputedStyle(body);
                    const htmlStyle = win.getComputedStyle(html);

                    log(`<pre>
Body:
  overflow: ${bodyStyle.overflow}
  overflow-y: ${bodyStyle.overflowY}
  height: ${bodyStyle.height}
  max-height: ${bodyStyle.maxHeight}
  position: ${bodyStyle.position}

HTML:
  overflow: ${htmlStyle.overflow}
  overflow-y: ${htmlStyle.overflowY}
  height: ${htmlStyle.height}
  max-height: ${htmlStyle.maxHeight}
</pre>`, 'info');

                    // Check for elements blocking scroll
                    log('<h3>üö´ Potential Blockers</h3>', 'info');

                    const loading = doc.getElementById('pageLoading');
                    if (loading) {
                        const loadingStyle = win.getComputedStyle(loading);
                        log(`<pre>
Loading Indicator:
  display: ${loadingStyle.display}
  visibility: ${loadingStyle.visibility}
  opacity: ${loadingStyle.opacity}
  z-index: ${loadingStyle.zIndex}
  position: ${loadingStyle.position}
  classList: ${loading.className}
</pre>`, loading.style.display === 'none' ? 'success' : 'error');
                    }

                    // Check for fixed/absolute elements covering page
                    const fixedElements = Array.from(doc.querySelectorAll('*')).filter(el => {
                        const style = win.getComputedStyle(el);
                        return (style.position === 'fixed' || style.position === 'absolute') &&
                               style.zIndex > 1000;
                    });

                    if (fixedElements.length > 0) {
                        log(`<h4>‚ö†Ô∏è Found ${fixedElements.length} high z-index elements:</h4>`, 'error');
                        fixedElements.forEach(el => {
                            const style = win.getComputedStyle(el);
                            log(`<pre>
Element: ${el.tagName}${el.id ? '#' + el.id : ''}${el.className ? '.' + el.className.split(' ').join('.') : ''}
  position: ${style.position}
  z-index: ${style.zIndex}
  display: ${style.display}
  width: ${style.width}
  height: ${style.height}
</pre>`, 'info');
                        });
                    }

                    log('<h3>‚úÖ Diagnostic Complete</h3>', 'success');
                    log('Click "Apply Fix" button to attempt automatic repair.', 'info');

                } catch (error) {
                    log(`<h3>‚ùå Error</h3><p>${error.message}</p>`, 'error');
                    log('<p>Make sure the landing page is open in the popup window.</p>', 'error');
                }
            }, 2000);
        }

        function applyFix() {
            document.getElementById('results').innerHTML = '';
            log('<h2>üîß Applying Fixes...</h2>', 'info');

            const win = window.open('/saas-landing.html', 'landingPage');

            setTimeout(() => {
                try {
                    const doc = win.document;
                    let fixed = [];

                    // Fix 1: Hide loading indicator
                    const loading = doc.getElementById('pageLoading');
                    if (loading) {
                        loading.style.display = 'none';
                        loading.style.visibility = 'hidden';
                        loading.classList.add('hidden');
                        fixed.push('‚úÖ Hidden loading indicator');
                    }

                    // Fix 2: Ensure body can scroll
                    doc.body.style.overflow = 'auto';
                    doc.body.style.overflowY = 'auto';
                    doc.body.style.height = 'auto';
                    doc.body.style.maxHeight = 'none';
                    fixed.push('‚úÖ Reset body overflow');

                    // Fix 3: Ensure html can scroll
                    doc.documentElement.style.overflow = 'auto';
                    doc.documentElement.style.overflowY = 'auto';
                    doc.documentElement.style.height = 'auto';
                    fixed.push('‚úÖ Reset html overflow');

                    // Fix 4: Remove any position fixed from main content
                    const main = doc.getElementById('mainContent');
                    if (main) {
                        main.style.position = 'relative';
                        main.style.height = 'auto';
                        fixed.push('‚úÖ Reset main content position');
                    }

                    log('<h3>‚úÖ Fixes Applied:</h3>', 'success');
                    fixed.forEach(f => log(`<p>${f}</p>`, 'success'));

                    log('<h3>üß™ Testing Scroll...</h3>', 'info');
                    log(`<pre>
Document Height: ${doc.body.scrollHeight}px
Window Height: ${win.innerHeight}px
Can Scroll: ${doc.body.scrollHeight > win.innerHeight ? 'YES ‚úÖ' : 'NO ‚ùå'}
</pre>`, doc.body.scrollHeight > win.innerHeight ? 'success' : 'error');

                    if (doc.body.scrollHeight > win.innerHeight) {
                        log('<h3>üéâ SUCCESS! The page should now scroll.</h3>', 'success');
                        log('<p>Try scrolling the landing page window now.</p>', 'success');
                    } else {
                        log('<h3>‚ö†Ô∏è Page height is too small</h3>', 'error');
                        log('<p>The content may not have loaded properly.</p>', 'error');
                    }

                } catch (error) {
                    log(`<h3>‚ùå Error</h3><p>${error.message}</p>`, 'error');
                }
            }, 2000);
        }
    </script>
</body>
</html>
