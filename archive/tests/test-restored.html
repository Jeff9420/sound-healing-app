<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å£°éŸ³ç–—æ„ˆåº”ç”¨ - åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #6666FF 0%, #FF6699 100%);
            min-height: 100vh;
            color: white;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .test-section {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .test-section h2 {
            margin-top: 0;
            color: #fff;
        }

        .status {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            margin: 5px;
        }

        .status.success {
            background: #4CAF50;
            color: white;
        }

        .status.error {
            background: #f44336;
            color: white;
        }

        .status.warning {
            background: #ff9800;
            color: white;
        }

        .status.info {
            background: #2196F3;
            color: white;
        }

        button {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }

        button:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .category-card {
            background: rgba(255,255,255,0.15);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .category-card:hover {
            background: rgba(255,255,255,0.25);
            transform: translateY(-3px);
        }

        .track-list {
            max-height: 400px;
            overflow-y: auto;
            margin: 20px 0;
        }

        .track-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .track-item:hover {
            background: rgba(255,255,255,0.2);
        }

        .audio-player {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }

        .controls {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #6666FF, #FF6699);
            width: 0%;
            transition: width 0.3s ease;
        }

        #debugLog {
            background: rgba(0,0,0,0.8);
            color: #00ff00;
            padding: 15px;
            border-radius: 10px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin: 20px 0;
        }

        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.3;
        }
    </style>
</head>
<body>
    <canvas id="backgroundCanvas"></canvas>

    <div class="container">
        <h1>ğŸµ å£°éŸ³ç–—æ„ˆåº”ç”¨ - åŠŸèƒ½æµ‹è¯•</h1>

        <div class="test-section">
            <h2>ğŸ“Š ç³»ç»ŸçŠ¶æ€æ£€æŸ¥</h2>
            <div id="systemStatus">
                <span class="status info">æ­£åœ¨æ£€æŸ¥...</span>
            </div>
            <button onclick="runSystemCheck()">ğŸ”„ é‡æ–°æ£€æŸ¥</button>
            <button onclick="testAudioPlayback()">ğŸµ æµ‹è¯•éŸ³é¢‘æ’­æ”¾</button>
            <button onclick="toggleBackground()">ğŸ¨ åˆ‡æ¢èƒŒæ™¯åŠ¨ç”»</button>
        </div>

        <div class="test-section">
            <h2>ğŸ“‚ éŸ³é¢‘ç±»åˆ«</h2>
            <div id="categoryGrid" class="category-grid">
                <span class="status info">æ­£åœ¨åŠ è½½...</span>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸµ æ’­æ”¾åˆ—è¡¨</h2>
            <div id="playlistSection" style="display: none;">
                <h3 id="playlistTitle"></h3>
                <div id="trackList" class="track-list"></div>
                <button onclick="backToCategories()">â† è¿”å›ç±»åˆ«</button>
            </div>
            <div id="categorySection">
                <p>è¯·é€‰æ‹©ä¸€ä¸ªç±»åˆ«æ¥æŸ¥çœ‹éŸ³é¢‘åˆ—è¡¨</p>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ§ éŸ³é¢‘æ’­æ”¾å™¨</h2>
            <div class="audio-player">
                <div class="track-info">
                    <h3 id="currentTrackName">æœªæ’­æ”¾</h3>
                    <p id="currentTrackArtist">è¯·é€‰æ‹©éŸ³é¢‘</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="time-display">
                        <span id="currentTime">0:00</span> / <span id="totalTime">0:00</span>
                    </div>
                </div>

                <div class="controls">
                    <button onclick="playPrevious()">â®ï¸</button>
                    <button onclick="togglePlayPause()" id="playPauseBtn">â–¶ï¸</button>
                    <button onclick="stopAudio()">â¹ï¸</button>
                    <button onclick="playNext()">â­ï¸</button>
                    <button onclick="toggleShuffle()" id="shuffleBtn">ğŸ”€</button>
                    <button onclick="toggleRepeat()" id="repeatBtn">ğŸ”</button>
                </div>

                <div class="volume-control">
                    <span>ğŸ”Š</span>
                    <input type="range" id="volumeSlider" min="0" max="100" value="70">
                    <span id="volumeValue">70%</span>
                </div>

                <div class="controls">
                    <button onclick="setSleepTimer(5)">â° 5åˆ†é’Ÿ</button>
                    <button onclick="setSleepTimer(15)">â° 15åˆ†é’Ÿ</button>
                    <button onclick="setSleepTimer(30)">â° 30åˆ†é’Ÿ</button>
                    <button onclick="toggleTheme()" id="themeBtn">ğŸŒ™ ä¸»é¢˜</button>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ”§ è°ƒè¯•æ—¥å¿—</h2>
            <button onclick="clearDebugLog()">æ¸…é™¤æ—¥å¿—</button>
            <div id="debugLog"></div>
        </div>
    </div>

    <!-- åŠ è½½å¿…è¦çš„JavaScriptæ–‡ä»¶ -->
    <script src="assets/js/audio-config.js"></script>
    <script>
        // å…¨å±€å˜é‡
        let currentCategory = null;
        let currentTrackIndex = 0;
        let isPlaying = false;
        let isShuffleOn = false;
        let isRepeatOn = false;
        let sleepTimerInterval = null;
        let backgroundAnimation = null;
        let isDarkTheme = true;

        // éŸ³é¢‘æ’­æ”¾å™¨
        const audioPlayer = new Audio();

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            logMessage('ğŸµ å£°éŸ³ç–—æ„ˆåº”ç”¨æµ‹è¯•å¼€å§‹');
            runSystemCheck();
            loadCategories();
            setupEventListeners();
            initBackgroundAnimation();
        });

        function logMessage(message, type = 'info') {
            const debugLog = document.getElementById('debugLog');
            const timestamp = new Date().toLocaleTimeString();
            const colorClass = type === 'error' ? 'color: #ff6b6b' :
                             type === 'success' ? 'color: #51cf66' :
                             type === 'warning' ? 'color: #ffd43b' : 'color: #74c0fc';

            debugLog.innerHTML += `<div style="${colorClass}">[${timestamp}] ${message}</div>`;
            debugLog.scrollTop = debugLog.scrollHeight;
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        function runSystemCheck() {
            const statusDiv = document.getElementById('systemStatus');
            let checks = [];

            // æ£€æŸ¥éŸ³é¢‘é…ç½®
            if (window.AUDIO_CONFIG) {
                const categoryCount = Object.keys(window.AUDIO_CONFIG.categories).length;
                const fileCount = Object.values(window.AUDIO_CONFIG.categories)
                    .reduce((total, cat) => total + (cat.files ? cat.files.length : 0), 0);
                checks.push(`<span class="status success">âœ… éŸ³é¢‘é…ç½®: ${categoryCount}ä¸ªç±»åˆ«, ${fileCount}ä¸ªæ–‡ä»¶</span>`);
            } else {
                checks.push(`<span class="status error">âŒ éŸ³é¢‘é…ç½®æœªåŠ è½½</span>`);
            }

            // æ£€æŸ¥éŸ³é¢‘æ”¯æŒ
            const audio = document.createElement('audio');
            const canPlayMP3 = audio.canPlayType('audio/mpeg') !== '';
            checks.push(`<span class="status ${canPlayMP3 ? 'success' : 'warning'}">ğŸµ MP3æ”¯æŒ: ${canPlayMP3 ? 'æ˜¯' : 'å¦'}</span>`);

            // æ£€æŸ¥Canvasæ”¯æŒ
            const canvas = document.getElementById('backgroundCanvas');
            const canvasSupported = !!(canvas && canvas.getContext);
            checks.push(`<span class="status ${canvasSupported ? 'success' : 'error'}">ğŸ¨ Canvasæ”¯æŒ: ${canvasSupported ? 'æ˜¯' : 'å¦'}</span>`);

            // æ£€æŸ¥æœ¬åœ°å­˜å‚¨
            const storageSupported = typeof(Storage) !== "undefined";
            checks.push(`<span class="status ${storageSupported ? 'success' : 'warning'}">ğŸ’¾ æœ¬åœ°å­˜å‚¨: ${storageSupported ? 'æ˜¯' : 'å¦'}</span>`);

            statusDiv.innerHTML = checks.join('');
            logMessage('ç³»ç»Ÿæ£€æŸ¥å®Œæˆ');
        }

        function loadCategories() {
            const categoryGrid = document.getElementById('categoryGrid');

            if (!window.AUDIO_CONFIG) {
                categoryGrid.innerHTML = '<span class="status error">âŒ éŸ³é¢‘é…ç½®æœªæ‰¾åˆ°</span>';
                return;
            }

            const categories = Object.keys(window.AUDIO_CONFIG.categories);
            categoryGrid.innerHTML = '';

            categories.forEach(categoryKey => {
                const category = window.AUDIO_CONFIG.categories[categoryKey];
                const categoryEl = document.createElement('div');
                categoryEl.className = 'category-card';
                categoryEl.onclick = () => openCategory(categoryKey);

                const fileCount = category.files ? category.files.length : 0;

                categoryEl.innerHTML = `
                    <div style="font-size: 3em; margin-bottom: 10px;">${category.icon || 'ğŸµ'}</div>
                    <div style="font-size: 1.2em; font-weight: bold; margin-bottom: 5px;">${category.name || categoryKey}</div>
                    <div style="font-size: 0.9em; opacity: 0.8; margin-bottom: 10px;">${category.description || 'ç–—æ„ˆéŸ³ä¹'}</div>
                    <div style="font-size: 0.8em; background: rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 15px;">${fileCount} ä¸ªéŸ³é¢‘</div>
                `;

                categoryGrid.appendChild(categoryEl);
            });

            logMessage(`âœ… å·²åŠ è½½ ${categories.length} ä¸ªç±»åˆ«`);
        }

        function openCategory(categoryKey) {
            currentCategory = categoryKey;
            const categorySection = document.getElementById('categorySection');
            const playlistSection = document.getElementById('playlistSection');
            const playlistTitle = document.getElementById('playlistTitle');
            const trackList = document.getElementById('trackList');

            if (!window.AUDIO_CONFIG.categories[categoryKey]) {
                logMessage('âŒ ç±»åˆ«ä¸å­˜åœ¨', 'error');
                return;
            }

            const category = window.AUDIO_CONFIG.categories[categoryKey];
            playlistTitle.textContent = `${category.icon} ${category.name}`;

            // åŠ è½½éŸ³è½¨
            trackList.innerHTML = '';
            category.files.forEach((fileName, index) => {
                const trackEl = document.createElement('div');
                trackEl.className = 'track-item';
                trackEl.onclick = () => playTrack(index, categoryKey, fileName);

                const displayName = fileName.replace('.mp3', '').replace(/^\d{1,2}-/, '');

                trackEl.innerHTML = `
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <div>
                            <div style="font-weight: bold; margin-bottom: 5px;">${index + 1}. ${displayName}</div>
                            <div style="font-size: 0.9em; opacity: 0.8;">${fileName}</div>
                        </div>
                        <div style="font-size: 1.5em;">â–¶ï¸</div>
                    </div>
                `;

                trackList.appendChild(trackEl);
            });

            // æ˜¾ç¤ºæ’­æ”¾åˆ—è¡¨ï¼Œéšè—ç±»åˆ«
            categorySection.style.display = 'none';
            playlistSection.style.display = 'block';

            logMessage(`ğŸµ å·²æ‰“å¼€ç±»åˆ«: ${category.name} (${category.files.length} ä¸ªæ–‡ä»¶)`);
        }

        function playTrack(index, categoryKey, fileName) {
            logMessage(`ğŸµ æ’­æ”¾: ${fileName}`);

            const currentTrackName = document.getElementById('currentTrackName');
            const currentTrackArtist = document.getElementById('currentTrackArtist');

            // æ›´æ–°UI
            currentTrackName.textContent = fileName.replace('.mp3', '');
            currentTrackArtist.textContent = window.AUDIO_CONFIG.categories[categoryKey].name;

            // è·å–éŸ³é¢‘URL
            const audioUrl = getAudioUrl(categoryKey, fileName);
            if (!audioUrl) {
                logMessage('âŒ éŸ³é¢‘URLç”Ÿæˆå¤±è´¥', 'error');
                return;
            }

            // æ’­æ”¾éŸ³é¢‘
            audioPlayer.src = audioUrl;
            audioPlayer.play().then(() => {
                isPlaying = true;
                currentTrackIndex = index;
                updatePlayPauseButton();
                logMessage(`âœ… æ­£åœ¨æ’­æ”¾: ${fileName.replace('.mp3', '')}`, 'success');
            }).catch(error => {
                logMessage(`âŒ æ’­æ”¾å¤±è´¥: ${error.message}`, 'error');
            });
        }

        function getAudioUrl(categoryKey, fileName) {
            if (!window.AUDIO_CONFIG) return null;

            const category = window.AUDIO_CONFIG.categories[categoryKey];
            if (!category) return null;

            const folderName = category.folder || categoryKey.toLowerCase().replace(/\s+/g, '-');
            return `${window.AUDIO_CONFIG.baseUrl}${folderName}/${encodeURIComponent(fileName)}`;
        }

        function setupEventListeners() {
            // éŸ³é¢‘æ’­æ”¾å™¨äº‹ä»¶
            audioPlayer.addEventListener('timeupdate', updateProgress);
            audioPlayer.addEventListener('loadedmetadata', updateDuration);
            audioPlayer.addEventListener('ended', handleTrackEnd);
            audioPlayer.addEventListener('play', () => { isPlaying = true; updatePlayPauseButton(); });
            audioPlayer.addEventListener('pause', () => { isPlaying = false; updatePlayPauseButton(); });

            // éŸ³é‡æ§åˆ¶
            document.getElementById('volumeSlider').addEventListener('input', updateVolume);
        }

        function togglePlayPause() {
            if (isPlaying) {
                audioPlayer.pause();
                logMessage('â¸ï¸ å·²æš‚åœ');
            } else {
                audioPlayer.play().catch(error => {
                    logMessage(`âŒ æ’­æ”¾å¤±è´¥: ${error.message}`, 'error');
                });
            }
        }

        function stopAudio() {
            audioPlayer.pause();
            audioPlayer.currentTime = 0;
            isPlaying = false;
            updatePlayPauseButton();
            logMessage('â¹ï¸ å·²åœæ­¢');
        }

        function updateVolume() {
            const volumeSlider = document.getElementById('volumeSlider');
            const volumeValue = document.getElementById('volumeValue');
            const volume = volumeSlider.value;
            audioPlayer.volume = volume / 100;
            volumeValue.textContent = volume + '%';
        }

        function updateProgress() {
            const progressFill = document.getElementById('progressFill');
            const currentTime = document.getElementById('currentTime');

            if (audioPlayer.duration) {
                const progress = (audioPlayer.currentTime / audioPlayer.duration) * 100;
                progressFill.style.width = progress + '%';
                currentTime.textContent = formatTime(audioPlayer.currentTime);
            }
        }

        function updateDuration() {
            const totalTime = document.getElementById('totalTime');
            if (audioPlayer.duration) {
                totalTime.textContent = formatTime(audioPlayer.duration);
            }
        }

        function handleTrackEnd() {
            logMessage('ğŸµ éŸ³é¢‘æ’­æ”¾ç»“æŸ');
            isPlaying = false;
            updatePlayPauseButton();

            if (isRepeatOn) {
                playCurrentTrack();
            } else {
                playNext();
            }
        }

        function playNext() {
            if (!currentCategory) return;

            const category = window.AUDIO_CONFIG.categories[currentCategory];
            if (!category || !category.files) return;

            if (isShuffleOn) {
                currentTrackIndex = Math.floor(Math.random() * category.files.length);
            } else {
                currentTrackIndex = (currentTrackIndex + 1) % category.files.length;
            }

            const fileName = category.files[currentTrackIndex];
            playTrack(currentTrackIndex, currentCategory, fileName);
        }

        function playPrevious() {
            if (!currentCategory) return;

            const category = window.AUDIO_CONFIG.categories[currentCategory];
            if (!category || !category.files) return;

            currentTrackIndex = currentTrackIndex > 0 ? currentTrackIndex - 1 : category.files.length - 1;
            const fileName = category.files[currentTrackIndex];
            playTrack(currentTrackIndex, currentCategory, fileName);
        }

        function playCurrentTrack() {
            if (!currentCategory) return;

            const category = window.AUDIO_CONFIG.categories[currentCategory];
            if (!category || !category.files) return;

            const fileName = category.files[currentTrackIndex];
            playTrack(currentTrackIndex, currentCategory, fileName);
        }

        function toggleShuffle() {
            isShuffleOn = !isShuffleOn;
            const shuffleBtn = document.getElementById('shuffleBtn');
            shuffleBtn.style.opacity = isShuffleOn ? '1' : '0.5';
            logMessage(isShuffleOn ? 'ğŸ”€ éšæœºæ’­æ”¾å·²å¼€å¯' : 'ğŸ”€ éšæœºæ’­æ”¾å·²å…³é—­');
        }

        function toggleRepeat() {
            isRepeatOn = !isRepeatOn;
            const repeatBtn = document.getElementById('repeatBtn');
            repeatBtn.style.opacity = isRepeatOn ? '1' : '0.5';
            logMessage(isRepeatOn ? 'ğŸ” å¾ªç¯æ’­æ”¾å·²å¼€å¯' : 'ğŸ” å¾ªç¯æ’­æ”¾å·²å…³é—­');
        }

        function updatePlayPauseButton() {
            const playPauseBtn = document.getElementById('playPauseBtn');
            playPauseBtn.textContent = isPlaying ? 'â¸ï¸' : 'â–¶ï¸';
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function backToCategories() {
            const categorySection = document.getElementById('categorySection');
            const playlistSection = document.getElementById('playlistSection');

            categorySection.style.display = 'block';
            playlistSection.style.display = 'none';

            logMessage('ğŸ“‚ è¿”å›ç±»åˆ«é€‰æ‹©');
        }

        function setSleepTimer(minutes) {
            if (sleepTimerInterval) {
                clearInterval(sleepTimerInterval);
            }

            if (minutes === 0) {
                logMessage('â° ç¡çœ å®šæ—¶å™¨å·²å…³é—­');
                return;
            }

            const endTime = new Date(Date.now() + minutes * 60000);
            logMessage(`â° ç¡çœ å®šæ—¶å™¨å·²è®¾ç½®ä¸º ${minutes} åˆ†é’Ÿ (${endTime.toLocaleTimeString()})`);

            sleepTimerInterval = setInterval(() => {
                const now = new Date();
                if (now >= endTime) {
                    stopAudio();
                    clearInterval(sleepTimerInterval);
                    logMessage('â° ç¡çœ å®šæ—¶å™¨æ—¶é—´åˆ°ï¼Œå·²åœæ­¢æ’­æ”¾');
                }
            }, 1000);
        }

        function toggleTheme() {
            isDarkTheme = !isDarkTheme;
            const themeBtn = document.getElementById('themeBtn');

            if (isDarkTheme) {
                document.body.style.background = 'linear-gradient(135deg, #6666FF 0%, #FF6699 100%)';
                themeBtn.textContent = 'ğŸŒ™ ä¸»é¢˜';
            } else {
                document.body.style.background = 'linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%)';
                themeBtn.textContent = 'â˜€ï¸ ä¸»é¢˜';
            }

            logMessage(isDarkTheme ? 'ğŸŒ™ å·²åˆ‡æ¢åˆ°æ·±è‰²ä¸»é¢˜' : 'â˜€ï¸ å·²åˆ‡æ¢åˆ°æµ…è‰²ä¸»é¢˜');
        }

        function initBackgroundAnimation() {
            const canvas = document.getElementById('backgroundCanvas');
            const ctx = canvas.getContext('2d');

            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }

            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            const particles = [];
            const particleCount = 30;

            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * 0.5,
                    vy: (Math.random() - 0.5) * 0.5,
                    size: Math.random() * 3 + 1,
                    opacity: Math.random() * 0.5 + 0.2
                });
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                particles.forEach(particle => {
                    particle.x += particle.vx;
                    particle.y += particle.vy;

                    if (particle.x < 0 || particle.x > canvas.width) particle.vx *= -1;
                    if (particle.y < 0 || particle.y > canvas.height) particle.vy *= -1;

                    ctx.beginPath();
                    ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(255, 255, 255, ${particle.opacity})`;
                    ctx.fill();
                });

                backgroundAnimation = requestAnimationFrame(animate);
            }

            animate();
            logMessage('ğŸ¨ èƒŒæ™¯åŠ¨ç”»å·²å¯åŠ¨');
        }

        function toggleBackground() {
            if (backgroundAnimation) {
                cancelAnimationFrame(backgroundAnimation);
                backgroundAnimation = null;
                const canvas = document.getElementById('backgroundCanvas');
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                logMessage('ğŸ¨ èƒŒæ™¯åŠ¨ç”»å·²åœæ­¢');
            } else {
                initBackgroundAnimation();
            }
        }

        function testAudioPlayback() {
            if (!currentCategory) {
                logMessage('âŒ è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç±»åˆ«', 'error');
                return;
            }

            const category = window.AUDIO_CONFIG.categories[currentCategory];
            if (category && category.files.length > 0) {
                playTrack(0, currentCategory, category.files[0]);
                logMessage('ğŸ§ª æ­£åœ¨æµ‹è¯•ç¬¬ä¸€ä¸ªéŸ³é¢‘æ–‡ä»¶');
            }
        }

        function clearDebugLog() {
            document.getElementById('debugLog').innerHTML = '';
            logMessage('ğŸ§¹ è°ƒè¯•æ—¥å¿—å·²æ¸…é™¤');
        }
    </script>
</body>
</html>