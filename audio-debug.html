<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>音频播放调试</title>
</head>
<body>
    <h1>音频播放调试工具</h1>
    <p>测试URL: <span id="url"></span></p>
    <audio id="testAudio" controls style="width: 100%;"></audio>
    <br><br>
    <button onclick="testPlay()">测试播放</button>
    <br><br>
    <div id="status"></div>
    <div id="errors" style="color: red;"></div>

    <script>
        const testUrl = 'https://archive.org/download/sound-healing-collection/animal-sounds/SPA音乐疗馆 1 - 减压疗程 The Curing Shop - For Decompression.mp3';
        document.getElementById('url').textContent = testUrl;

        function testPlay() {
            const audio = document.getElementById('testAudio');
            const status = document.getElementById('status');
            const errors = document.getElementById('errors');

            status.innerHTML = '正在加载...';
            errors.innerHTML = '';

            audio.src = testUrl;

            audio.addEventListener('loadstart', () => {
                status.innerHTML += '<br>✓ loadstart事件触发';
            });

            audio.addEventListener('loadeddata', () => {
                status.innerHTML += '<br>✓ loadeddata事件触发';
            });

            audio.addEventListener('canplay', () => {
                status.innerHTML += '<br>✓ canplay事件触发 - 音频可以播放';
                audio.play().then(() => {
                    status.innerHTML += '<br>✓ 开始播放';
                }).catch(e => {
                    errors.innerHTML = '播放失败: ' + e.message;
                });
            });

            audio.addEventListener('error', (e) => {
                errors.innerHTML = '加载错误: ' + audio.error.message + ' (代码: ' + audio.error.code + ')';
            });
        }

        // 自动测试
        setTimeout(testPlay, 1000);
    </script>
</body>
</html>
