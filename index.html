<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="声音疗愈应用 - 聆听大自然的治愈之声，重归内心宁静">
    <meta name="keywords" content="声音疗愈,冥想,自然音声,放松,睡眠,颂钵,chakra">
    <meta name="author" content="Sound Healing Team">

    <title>声音疗愈空间 - 专业音频疗法平台 | Sound Healing Space</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png">

    <!-- External Stylesheets -->
    <link rel="stylesheet" href="assets/css/index-styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-spinner"></div>
        <div class="loading-text" data-i18n="loading.text">
            🎵 正在加载声音疗愈空间...<br>
            <small data-i18n="loading.subtext">请稍候，正在加载疗愈音频</small>
        </div>
    </div>

    <!-- Main Application -->
    <div id="app">
        <!-- Background Canvas -->
        <canvas id="backgroundCanvas"></canvas>

        <!-- Header -->
        <div class="container">
            <header class="header">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div>
                        <h1 data-i18n="app.title">🎵 声音疗愈空间</h1>
                        <p class="subtitle" data-i18n="app.subtitle">专业音频疗法平台 - 帮您放松身心，找回内心平静</p>
                    </div>
                    <!-- Language Selector -->
                    <div class="language-selector">
                        <select id="languageSelect" onchange="changeLanguage(this.value)">
                            <option value="zh-CN">中文</option>
                            <option value="en-US">English</option>
                            <option value="ja-JP">日本語</option>
                            <option value="ko-KR">한국어</option>
                            <option value="es-ES">Español</option>
                        </select>
                    </div>
                </div>
            </header>

            <!-- Category Section -->
            <section class="category-section">
                <div id="categoryGrid" class="category-grid">
                    <!-- Categories will be loaded here by JavaScript -->
                </div>
            </section>
        </div>

        <!-- Playlist Modal -->
        <div id="playlistModal" class="playlist-modal">
            <div class="modal-content">
                <span class="close" onclick="closePlaylist()" data-i18n="modal.close">&times;</span>
                <h2 id="playlistTitle" data-i18n="playlist.title">选择音频</h2>
                <div id="trackList" class="track-list"></div>
            </div>
        </div>

        <!-- Audio Player -->
        <div id="audioPlayer" class="audio-player" onclick="if(isMinimized) toggleMinimize()">
            <div class="minimize-indicator" onclick="toggleMinimize(event)" data-i18n="player.minimize">▲ 收起</div>
            <div class="minimized-display">
                <div class="minimized-text" id="minimizedTrack" data-i18n="player.notPlaying">未播放</div>
            </div>
            <div class="player-content">
                <div class="now-playing">
                    <div id="currentTrack" class="track-title" data-i18n="player.notPlaying">未播放</div>
                    <div id="currentCategory" class="track-category"></div>
                </div>

                <div class="player-controls">
                    <button class="control-btn" onclick="previousTrack()">⏮️</button>
                    <button id="playPauseBtn" class="control-btn play-btn" onclick="togglePlayPause()">▶️</button>
                    <button class="control-btn" onclick="nextTrack()">⏭️</button>
                    <button class="control-btn" onclick="stopAudio()">⏹️</button>
                </div>

                <div class="progress-container">
                    <span id="currentTime" class="time-display">0:00</span>
                    <div class="progress-bar" onclick="seekTo(event)">
                        <div id="progressFill" class="progress-fill"></div>
                    </div>
                    <span id="duration" class="time-display">0:00</span>
                </div>

                <!-- Additional Controls -->
                <div class="extra-controls">
                    <div class="control-group">
                        <button class="control-btn" id="shuffleBtn" onclick="toggleShuffle()" data-i18n-title="player.shuffle">🔀</button>
                        <button class="control-btn" id="repeatBtn" onclick="toggleRepeat()" data-i18n-title="player.repeat">🔁</button>
                        <button class="control-btn" id="sleepTimerBtn" onclick="toggleSleepTimer()" data-i18n-title="player.sleepTimer">⏰</button>
                    </div>

                    <div class="control-group">
                        <span style="margin-right: 10px;">🔊</span>
                        <input type="range" id="volumeSlider" class="volume-slider" min="0" max="100" value="70" onchange="changeVolume(this.value)">
                        <span id="volumeValue" style="margin-left: 10px; min-width: 35px;">70%</span>
                    </div>

                    <div class="control-group">
                        <span style="margin-right: 10px;">⚡</span>
                        <select id="playbackRate" class="playback-rate" onchange="changePlaybackRate(this.value)">
                            <option value="0.5">0.5x</option>
                            <option value="0.75">0.75x</option>
                            <option value="1" selected>1x</option>
                            <option value="1.25">1.25x</option>
                            <option value="1.5">1.5x</option>
                            <option value="2">2x</option>
                        </select>
                    </div>
                </div>

                <!-- Sleep Timer Modal -->
                <div id="sleepTimerModal" class="timer-modal" style="display: none;">
                    <div class="timer-content">
                        <h3 data-i18n="timer.title">睡眠定时器</h3>
                        <div class="timer-options">
                            <button onclick="setSleepTimer(5)" data-i18n="timer.5min">5分钟</button>
                            <button onclick="setSleepTimer(10)" data-i18n="timer.10min">10分钟</button>
                            <button onclick="setSleepTimer(15)" data-i18n="timer.15min">15分钟</button>
                            <button onclick="setSleepTimer(30)" data-i18n="timer.30min">30分钟</button>
                            <button onclick="setSleepTimer(60)" data-i18n="timer.60min">60分钟</button>
                            <button onclick="setSleepTimer(0)" data-i18n="timer.off">关闭</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notification -->
        <div id="notification" class="notification"></div>
    </div>

    <!-- External JavaScript Files -->
    <!-- Load in order: config → i18n → app logic -->
    <script src="assets/js/audio-config.js"></script>
    <script src="assets/js/i18n-system.js"></script>
    <script src="assets/js/index-app.js"></script>
</body>
</html>
