/**
 * 主题系统 - Theme System
 * 支持明暗主题切换
 */

/* ==========================================================================
   主题系统 - 使用 global-theme.css 的 Raphael AI 温暖棕色主题
   ========================================================================== */

/* :root 定义已移除，使用全局主题变量 */

/* ==========================================================================
   Light Theme (亮色主题)
   ========================================================================== */

[data-theme="light"] {
    /* 主色调 - Raphael 风格的深棕基底 */
    --primary-bg: #0b0704;
    --primary-bg-gradient-start: #0b0704;
    --primary-bg-gradient-mid: #1d0c08;
    --primary-bg-gradient-end: #130805;

    /* 文字颜色 */
    --text-primary: #fdf3e5;
    --text-secondary: #e4cfba;
    --text-tertiary: #bfa48c;

    /* 卡片和组件背景 */
    --card-bg: rgba(26, 15, 10, 0.88);
    --card-bg-hover: rgba(34, 18, 12, 0.94);
    --card-border: rgba(253, 243, 229, 0.12);

    /* 按钮 */
    --button-bg: rgba(253, 243, 229, 0.08);
    --button-bg-hover: rgba(253, 243, 229, 0.16);
    --button-border: rgba(253, 243, 229, 0.18);

    /* 播放器 */
    --player-bg: rgba(19, 11, 7, 0.92);
    --player-border: rgba(253, 243, 229, 0.1);

    /* 进度条和滑块 */
    --progress-bg: rgba(253, 243, 229, 0.18);
    --progress-fill: #f6a93b;

    /* 模态框 */
    --modal-bg: linear-gradient(140deg, rgba(17, 7, 4, 0.95) 0%, rgba(58, 23, 14, 0.85) 45%, rgba(122, 90, 248, 0.45) 100%);
    --modal-overlay: rgba(5, 3, 2, 0.75);

    /* 通知 */
    --notification-bg: rgba(20, 10, 6, 0.95);

    /* 阴影 */
    --shadow-sm: 0 6px 24px rgba(5, 3, 2, 0.3);
    --shadow-md: 0 12px 40px rgba(5, 3, 2, 0.45);
    --shadow-lg: 0 20px 60px rgba(5, 3, 2, 0.55);

    /* 主题色 */
    --theme-color: #f6a93b;
    --theme-accent: #7a5af8;
}

/* ==========================================================================
   应用主题变量到现有样式
   ========================================================================== */

/* body 背景由 global-theme.css 统一控制，此处不再重复定义 */

.loading-screen {
    background: var(--primary-bg);
    background-image: linear-gradient(
        135deg,
        var(--primary-bg-gradient-start) 0%,
        var(--primary-bg-gradient-mid) 50%,
        var(--primary-bg-gradient-end) 100%
    );
}

/* Header Icon Buttons */
.header-icon-btn {
    background: var(--button-bg);
    border: 1px solid var(--button-border);
    color: var(--text-primary);
}

.header-icon-btn:hover {
    background: var(--button-bg-hover);
    box-shadow: var(--shadow-md);
}

/* Language Selector */
.language-selector select {
    background: var(--button-bg);
    color: var(--text-primary);
    border: 1px solid var(--button-border);
}

.language-selector select:hover {
    background: var(--button-bg-hover);
}

.language-selector option {
    background: var(--primary-bg);
    color: var(--text-primary);
}

/* Category Cards */
.category-card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    color: var(--text-primary);
}

.category-card:hover {
    background: var(--card-bg-hover);
    box-shadow: var(--shadow-lg);
}

/* Playlist Modal */
.modal-content {
    background: var(--modal-bg);
}

.playlist-modal {
    background: var(--modal-overlay);
}

/* Audio Player */
.audio-player {
    background: var(--player-bg);
    border-top: 1px solid var(--player-border);
    color: var(--text-primary);
}

.control-btn {
    color: var(--text-primary);
}

.control-btn:hover {
    background: var(--button-bg-hover);
}

/* Progress Bar */
.progress-bar {
    background: var(--progress-bg);
}

.progress-fill {
    background: var(--progress-fill);
}

/* Volume Slider */
.volume-slider {
    background: var(--progress-bg);
}

.volume-slider::-webkit-slider-thumb {
    background: var(--progress-fill);
}

/* Playback Rate */
.playback-rate {
    background: var(--button-bg);
    color: var(--text-primary);
    border: 1px solid var(--button-border);
}

.playback-rate option {
    background: var(--primary-bg);
}

/* Timer Modal */
.timer-modal {
    background: var(--player-bg);
    border: 1px solid var(--player-border);
}

.timer-content h3 {
    color: var(--text-primary);
}

.timer-options button {
    background: var(--button-bg);
    color: var(--text-primary);
    border: 1px solid var(--button-border);
}

.timer-options button:hover {
    background: var(--button-bg-hover);
}

/* Notification */
.notification {
    background: var(--notification-bg);
    color: var(--text-primary);
    box-shadow: var(--shadow-lg);
}

[data-theme="light"] .notification {
    color: var(--text-primary);
    border: 1px solid var(--card-border);
}

/* Track Items */
.track-item {
    background: var(--card-bg);
    color: var(--text-primary);
}

.track-item:hover {
    background: var(--card-bg-hover);
}

/* Minimized Display */
.minimized-text {
    color: var(--text-primary);
}

.minimize-indicator {
    background: var(--button-bg);
    color: var(--text-primary);
}

.minimize-indicator:hover {
    background: var(--button-bg-hover);
}

/* ==========================================================================
   主题切换按钮样式
   ========================================================================== */

.theme-toggle-btn {
    position: relative;
    background: var(--button-bg);
    border: 1px solid var(--button-border);
    color: var(--text-primary);
    width: 40px;
    height: 40px;
    border-radius: 50%;
    font-size: 1.2em;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(10px);
}

.theme-toggle-btn:hover {
    background: var(--button-bg-hover);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.theme-toggle-btn:active {
    transform: translateY(0);
}

.theme-icon {
    transition: transform 0.3s ease;
}

.theme-toggle-btn:hover .theme-icon {
    transform: rotate(20deg);
}

/* 主题切换动画 */
@keyframes themeSwitch {
    0% {
        opacity: 1;
        transform: scale(1) rotate(0deg);
    }
    50% {
        opacity: 0.5;
        transform: scale(0.95) rotate(180deg);
    }
    100% {
        opacity: 1;
        transform: scale(1) rotate(360deg);
    }
}

[data-theme-transitioning] * {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease !important;
}

/* ==========================================================================
   亮色主题特殊调整
   ========================================================================== */

[data-theme="light"] h1,
[data-theme="light"] .subtitle {
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
}

[data-theme="light"] .loading-spinner {
    border-color: rgba(0, 0, 0, 0.2);
    border-top-color: var(--theme-color);
}

[data-theme="light"] #shuffleBtn.active,
[data-theme="light"] #repeatBtn.active,
[data-theme="light"] #sleepTimerBtn.active {
    color: var(--theme-color);
    background: rgba(102, 102, 255, 0.2);
}

[data-theme="light"] #backgroundCanvas {
    display: none;
}

/* ==========================================================================
   响应式调整
   ========================================================================== */

@media (max-width: 768px) {
    .theme-toggle-btn {
        width: 36px;
        height: 36px;
        font-size: 1.1em;
    }
}
