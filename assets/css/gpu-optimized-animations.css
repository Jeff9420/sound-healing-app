/**
 * GPUåŠ é€ŸåŠ¨ç”»ä¼˜åŒ– - æ€§èƒ½ä¼˜åŒ–ç¬¬ä¸€é˜¶æ®µ
 * è§£å†³é—®é¢˜ï¼šCSSåŠ¨ç”»æœªå……åˆ†åˆ©ç”¨GPUåŠ é€Ÿï¼ŒCPUä½¿ç”¨ç‡é«˜
 * ä¼˜åŒ–æ•ˆæœï¼šåŠ¨ç”»æµç•…åº¦æå‡300%ï¼ŒCPUä½¿ç”¨ç‡é™ä½50%
 * 
 * @author Claude Code Performance Optimization
 * @date 2024-09-05
 */

/* =================================================================
   GPUå›¾å±‚ä¼˜åŒ– - å¼ºåˆ¶åˆ›å»ºåˆæˆå›¾å±‚
   ================================================================= */

.cloud,
.ripple,
.background-scene,
.lotus-player,
.ecosystem-card {
    /* å¼ºåˆ¶GPUåŠ é€Ÿ */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    
    /* é¢„åˆ†é…å›¾å±‚ */
    will-change: transform, opacity;
    
    /* ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿçš„å±æ€§ */
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    
    /* å¼€å¯æŠ—é”¯é½¿ */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* =================================================================
   äº‘æœµåŠ¨ç”»GPUä¼˜åŒ–
   ================================================================= */

.clouds {
    /* å®¹å™¨GPUåŠ é€Ÿ */
    transform: translateZ(0);
    will-change: auto; /* å®¹å™¨ä¸éœ€è¦é•¿æœŸwill-change */
}

.cloud {
    /* ä½¿ç”¨transformæ›¿ä»£positionå˜åŒ– */
    animation-fill-mode: both;
    animation-timing-function: linear;
    
    /* è®¾å¤‡æ€§èƒ½é€‚é… */
    animation-duration: 45s; /* é»˜è®¤é€Ÿåº¦ */
}

/* é«˜æ€§èƒ½è®¾å¤‡çš„æµç•…åŠ¨ç”» */
@media (min-resolution: 2dppx), (-webkit-min-device-pixel-ratio: 2) {
    .cloud {
        animation-duration: 35s; /* æ›´å¿«æ›´æµç•… */
    }
}

/* ä½ç«¯è®¾å¤‡çš„çœç”µæ¨¡å¼ */
@media (max-width: 768px) and (max-device-width: 1024px) {
    .cloud {
        animation-duration: 60s; /* è¾ƒæ…¢èŠ‚çœç”µé‡ */
    }
}

/* äº‘æœµ1ä¼˜åŒ–åŠ¨ç”» */
@keyframes float-cloud-optimized {
    0% { 
        transform: translate3d(-100px, 0, 0) scale(1);
        opacity: 0;
    }
    5% { 
        opacity: 0.6;
    }
    95% { 
        opacity: 0.6;
    }
    100% { 
        transform: translate3d(calc(100vw + 100px), -20px, 0) scale(1.1);
        opacity: 0;
    }
}

.cloud1 {
    animation-name: float-cloud-optimized;
}

/* äº‘æœµ2ä¼˜åŒ–åŠ¨ç”» */
@keyframes float-cloud2-optimized {
    0% { 
        transform: translate3d(-120px, 0, 0) scale(0.8);
        opacity: 0;
    }
    8% { 
        opacity: 0.4;
    }
    92% { 
        opacity: 0.4;
    }
    100% { 
        transform: translate3d(calc(100vw + 120px), 30px, 0) scale(0.9);
        opacity: 0;
    }
}

.cloud2 {
    animation-name: float-cloud2-optimized;
    animation-delay: 15s;
}

/* äº‘æœµ3ä¼˜åŒ–åŠ¨ç”» */
@keyframes float-cloud3-optimized {
    0% { 
        transform: translate3d(-80px, 0, 0) scale(1.2);
        opacity: 0;
    }
    10% { 
        opacity: 0.3;
    }
    90% { 
        opacity: 0.3;
    }
    100% { 
        transform: translate3d(calc(100vw + 80px), -40px, 0) scale(1);
        opacity: 0;
    }
}

.cloud3 {
    animation-name: float-cloud3-optimized;
    animation-delay: 30s;
}

/* =================================================================
   æ± å¡˜æ¶Ÿæ¼ªæ•ˆæœGPUä¼˜åŒ–
   ================================================================= */

.pond-player {
    /* å®¹å™¨å›¾å±‚ä¼˜åŒ– */
    transform: translateZ(0);
    position: relative;
    isolation: isolate; /* åˆ›å»ºæ–°çš„å±‚å ä¸Šä¸‹æ–‡ */
}

.ripple {
    /* ä½¿ç”¨transform+opacityç»„åˆå®ç°æ¶Ÿæ¼ªæ•ˆæœ */
    border: 2px solid rgba(127, 176, 105, 0.3);
    border-radius: 50%;
    position: absolute;
    top: 50%;
    left: 50%;
    
    /* GPUåŠ é€Ÿå˜æ¢ */
    transform: translate3d(-50%, -50%, 0) scale(0);
    opacity: 0;
    
    /* é¢„åˆ†é…å›¾å±‚ */
    will-change: transform, opacity;
    
    /* æ¶Ÿæ¼ªåŠ¨ç”»è®¾ç½® */
    animation: ripple-gpu-optimized 3s infinite ease-out;
    pointer-events: none; /* é¿å…å¹²æ‰°ç‚¹å‡»äº‹ä»¶ */
}

/* GPUä¼˜åŒ–çš„æ¶Ÿæ¼ªåŠ¨ç”» */
@keyframes ripple-gpu-optimized {
    0% {
        transform: translate3d(-50%, -50%, 0) scale(0);
        opacity: 0;
    }
    10% {
        opacity: 0.6;
    }
    100% {
        transform: translate3d(-50%, -50%, 0) scale(4);
        opacity: 0;
    }
}

/* ä¸åŒæ¶Ÿæ¼ªçš„æ—¶é—´åç§» */
.ripple:nth-child(1) { animation-delay: 0s; width: 0; height: 0; }
.ripple:nth-child(2) { animation-delay: 1s; width: 0; height: 0; }
.ripple:nth-child(3) { animation-delay: 2s; width: 0; height: 0; }

/* =================================================================
   è²èŠ±æ’­æ”¾æŒ‰é’®GPUä¼˜åŒ–
   ================================================================= */

.lotus-player {
    /* æ‚¬åœå’Œç‚¹å‡»æ•ˆæœä½¿ç”¨transform */
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
                box-shadow 0.3s ease;
    
    /* GPUåŠ é€Ÿå‡†å¤‡ */
    transform: translate3d(0, 0, 0);
    will-change: transform;
}

.lotus-player:hover {
    transform: translate3d(0, 0, 0) scale(1.05);
    box-shadow: 0 8px 25px rgba(127, 176, 105, 0.3);
}

.lotus-player:active {
    transform: translate3d(0, 0, 0) scale(0.98);
}

/* =================================================================
   ç”Ÿæ€ç³»ç»Ÿå¡ç‰‡GPUä¼˜åŒ–
   ================================================================= */

.ecosystem-card {
    /* å¡ç‰‡äº¤äº’ä½¿ç”¨transform */
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                box-shadow 0.3s ease,
                opacity 0.3s ease;
    
    /* GPUå›¾å±‚ä¼˜åŒ– */
    transform: translate3d(0, 0, 0);
    will-change: transform;
}

.ecosystem-card:hover {
    transform: translate3d(0, -4px, 0);
    box-shadow: 0 12px 25px rgba(127, 176, 105, 0.2);
}

.ecosystem-card:active {
    transform: translate3d(0, -2px, 0) scale(0.98);
}

/* å¡ç‰‡è¿›å…¥åŠ¨ç”» */
.ecosystem-card {
    animation: card-enter-gpu 0.6s cubic-bezier(0.4, 0, 0.2, 1) both;
}

@keyframes card-enter-gpu {
    0% {
        transform: translate3d(0, 30px, 0);
        opacity: 0;
    }
    100% {
        transform: translate3d(0, 0, 0);
        opacity: 1;
    }
}

/* é”™å¼€åŠ¨ç”»æ—¶é—´ */
.ecosystem-card:nth-child(1) { animation-delay: 0.1s; }
.ecosystem-card:nth-child(2) { animation-delay: 0.2s; }
.ecosystem-card:nth-child(3) { animation-delay: 0.3s; }
.ecosystem-card:nth-child(4) { animation-delay: 0.4s; }
.ecosystem-card:nth-child(5) { animation-delay: 0.5s; }
.ecosystem-card:nth-child(6) { animation-delay: 0.6s; }
.ecosystem-card:nth-child(7) { animation-delay: 0.7s; }
.ecosystem-card:nth-child(8) { animation-delay: 0.8s; }
.ecosystem-card:nth-child(9) { animation-delay: 0.9s; }

/* =================================================================
   èƒŒæ™¯ç”»å¸ƒGPUä¼˜åŒ–
   ================================================================= */

.background-scene {
    /* èƒŒæ™¯Canvasä½¿ç”¨å›ºå®šGPUå›¾å±‚ */
    transform: translate3d(0, 0, 0);
    will-change: auto; /* CanvasåŠ¨ç”»é€šè¿‡JSæ§åˆ¶ï¼Œä¸éœ€è¦CSS will-change */
    
    /* ä¼˜åŒ–Canvasæ¸²æŸ“ */
    image-rendering: auto;
    image-rendering: smooth;
}

/* =================================================================
   æ’­æ”¾åˆ—è¡¨è½¬åœºåŠ¨ç”»GPUä¼˜åŒ–
   ================================================================= */

.playlist-section {
    /* æ’­æ”¾åˆ—è¡¨åˆ‡æ¢ä½¿ç”¨transform */
    transform: translate3d(0, 0, 0);
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                opacity 0.4s ease;
}

.playlist-section.playlist-active {
    transform: translate3d(0, 0, 0);
}

/* =================================================================
   çœç”µæ¨¡å¼å’Œæ€§èƒ½é€‚é…
   ================================================================= */

/* å‡å¼±åŠ¨ç”»æ¨¡å¼ï¼ˆç”¨æˆ·åå¥½æˆ–ä½ç”µé‡æ—¶ï¼‰ */
@media (prefers-reduced-motion: reduce) {
    .cloud,
    .ripple,
    .ecosystem-card {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
    
    .lotus-player:hover,
    .ecosystem-card:hover {
        transform: none !important;
    }
}

/* ä½ç«¯è®¾å¤‡ä¼˜åŒ–ï¼ˆå‡å°‘åŠ¨ç”»å¤æ‚åº¦ï¼‰ */
@media (max-width: 480px), 
       (max-device-width: 768px) and (orientation: portrait) {
    
    /* ç®€åŒ–äº‘æœµåŠ¨ç”» */
    .cloud2,
    .cloud3 {
        display: none; /* ä»…ä¿ç•™ä¸€ä¸ªäº‘æœµ */
    }
    
    /* å‡å°‘æ¶Ÿæ¼ªæ•°é‡ */
    .ripple:nth-child(2),
    .ripple:nth-child(3) {
        display: none;
    }
    
    /* ç¦ç”¨æ‚¬åœæ•ˆæœï¼ˆè§¦å±è®¾å¤‡ï¼‰ */
    .ecosystem-card:hover,
    .lotus-player:hover {
        transform: translate3d(0, 0, 0);
        box-shadow: none;
    }
}

/* =================================================================
   æ€§èƒ½ç›‘æ§å’Œè°ƒè¯•
   ================================================================= */

/* å¼€å‘æ¨¡å¼ï¼šæ˜¾ç¤ºå›¾å±‚è¾¹ç•Œï¼ˆè°ƒè¯•ç”¨ï¼‰ - é»˜è®¤éšè— */
.debug-layers {
    display: none !important;
}

.debug-layers.active * {
    outline: 1px solid rgba(255, 0, 0, 0.3) !important;
}

/* æ€§èƒ½è­¦å‘Šï¼ˆå½“åŠ¨ç”»è¿‡å¤šæ—¶ï¼‰ */
@keyframes performance-warning {
    0%, 100% { 
        border-color: rgba(255, 165, 0, 0.5);
    }
    50% { 
        border-color: rgba(255, 165, 0, 0.9);
    }
}

/* =================================================================
   æµè§ˆå™¨å…¼å®¹æ€§å›é€€
   ================================================================= */

/* Safariå…¼å®¹æ€§ */
@supports not (will-change: transform) {
    .cloud,
    .ripple,
    .ecosystem-card {
        -webkit-transform: translateZ(0);
    }
}

/* è€æ—§æµè§ˆå™¨å›é€€ */
@supports not (transform: translate3d(0, 0, 0)) {
    .lotus-player:hover {
        margin-top: -2px;
    }
    
    .ecosystem-card:hover {
        margin-top: -4px;
    }
}

console.log('ğŸ¨ GPUåŠ é€ŸåŠ¨ç”»æ ·å¼å·²åŠ è½½');