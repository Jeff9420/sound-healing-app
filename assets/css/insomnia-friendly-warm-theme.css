/* =================================================================
   🌙 失眠友好UI - 温暖夜色主题 (方案一)
   ================================================================= */

/* 全局失眠友好设置 */
:root {
    /* === 核心颜色变量 === */
    /* 背景色系 - 模拟蜡烛光环境 */
    --bg-deepest: #0d0704;      /* 深咖啡黑 - 最深背景 */
    --bg-deep: #1a0f08;         /* 深暖棕 - 深层背景 */
    --bg-medium: #2d1810;       /* 温暖棕 - 中层背景 */
    --bg-light: #3d2817;        /* 暖褐色 - 浅层背景 */

    /* 文字色系 - 温暖金色调 */
    --text-primary: #f4e4bc;    /* 温暖米色 - 主要文字 */
    --text-secondary: #d4a574;  /* 金色 - 次要文字 */
    --text-tertiary: #b8956b;   /* 暗金色 - 辅助文字 */
    --text-muted: #9a7f5a;      /* 静音文字 */

    /* 强调和交互色系 */
    --accent-primary: #8b4513;   /* 深棕色 - 主要强调色 */
    --accent-warm: #cd853f;      /* 暖棕色 - 温暖强调色 */
    --accent-glow: #daa520;      /* 金光色 - 发光强调色 */

    /* 半透明覆盖层 */
    --overlay-dark: rgba(13, 7, 4, 0.9);        /* 深色遮罩 */
    --overlay-medium: rgba(45, 24, 16, 0.8);    /* 中等遮罩 */
    --overlay-light: rgba(61, 40, 23, 0.6);     /* 浅色遮罩 */
    --overlay-subtle: rgba(77, 51, 34, 0.4);    /* 微妙遮罩 */

    /* 渐变定义 */
    --gradient-warm: linear-gradient(135deg, var(--bg-deepest) 0%, var(--bg-deep) 30%, var(--bg-medium) 70%, var(--bg-light) 100%);
    --gradient-card: linear-gradient(145deg, var(--overlay-medium) 0%, var(--overlay-light) 50%, var(--overlay-subtle) 100%);
    --gradient-glow: radial-gradient(circle at center, var(--accent-glow) 0%, transparent 70%);

    /* === 失眠友好技术参数 === */
    /* 蓝光过滤设置 */
    --blue-light-filter: sepia(0.15) saturate(0.85) hue-rotate(18deg) brightness(0.88) contrast(0.92);
    --night-mode-filter: brightness(0.75) contrast(0.9) sepia(0.1);
    --deep-night-filter: brightness(0.65) contrast(0.85) sepia(0.15);

    /* 过渡动画 - 4秒呼吸节律 */
    --smooth-transition: all 4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --gentle-transition: all 2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --breathing-rhythm: 4s;

    /* 阴影定义 - 温暖柔和 */
    --shadow-soft: 0 4px 20px rgba(139, 69, 19, 0.15);
    --shadow-medium: 0 8px 32px rgba(139, 69, 19, 0.25);
    --shadow-strong: 0 12px 48px rgba(139, 69, 19, 0.35);
    --shadow-glow: 0 0 24px rgba(218, 165, 32, 0.3);
    --shadow-text: 0 2px 8px rgba(13, 7, 4, 0.8);

    /* 边框和描边 */
    --border-warm: 1px solid rgba(212, 165, 116, 0.3);
    --border-glow: 1px solid rgba(218, 165, 32, 0.5);
    --border-soft: 1px solid rgba(139, 69, 19, 0.2);
}

/* =================================================================
   全局基础样式重置
   ================================================================= */

/* 全局蓝光过滤 */
html {
    filter: var(--blue-light-filter);
    background: var(--bg-deepest);
}

body {
    background: var(--gradient-warm);
    color: var(--text-primary);
    font-family: 'Microsoft YaHei', 'SF Pro Display', system-ui, -apple-system, sans-serif;
    transition: var(--smooth-transition);
    min-height: 100vh;
    /* 优化文字渲染 */
    font-smooth: always;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
}

/* 所有文字添加温暖阴影 */
h1, h2, h3, h4, h5, h6, p, span, div, button {
    text-shadow: var(--shadow-text);
    transition: var(--gentle-transition);
}

/* =================================================================
   标题和文本样式
   ================================================================= */

/* 主标题 */
.simple-title, .titulo {
    color: var(--text-primary);
    font-weight: 700;
    letter-spacing: 1px;
    text-shadow:
        0 2px 4px rgba(13, 7, 4, 0.8),
        0 0 12px rgba(218, 165, 32, 0.3);
    background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-glow) 100%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

/* 副标题 */
.simple-subtitle {
    color: var(--text-secondary);
    font-weight: 400;
    opacity: 0.9;
}

/* 次要文本 */
.text-secondary, .room-count, .habitat-type {
    color: var(--text-secondary);
    opacity: 0.85;
}

/* 静音文本 */
.text-muted {
    color: var(--text-muted);
    opacity: 0.7;
}

/* =================================================================
   卡片和容器样式
   ================================================================= */

/* 3D轮播卡片 */
.carrossel-item {
    background: var(--gradient-card);
    border: var(--border-warm);
    border-radius: 20px;
    backdrop-filter: blur(20px) saturate(1.2);
    box-shadow: var(--shadow-medium);
    transition: var(--smooth-transition);
    overflow: hidden;
    position: relative;
}

/* 卡片悬浮效果 */
.carrossel-item:hover {
    background: linear-gradient(145deg,
        rgba(61, 40, 23, 0.9) 0%,
        rgba(77, 51, 34, 0.7) 50%,
        rgba(91, 60, 39, 0.5) 100%);
    border-color: var(--accent-glow);
    box-shadow:
        var(--shadow-strong),
        var(--shadow-glow);
    transform: translateY(-2px) scale(1.02);
}

/* 活跃卡片样式 */
.carrossel-item.active {
    border: 2px solid var(--accent-glow);
    box-shadow:
        var(--shadow-strong),
        var(--shadow-glow),
        inset 0 0 20px rgba(218, 165, 32, 0.1);
    animation: gentleGlow var(--breathing-rhythm) ease-in-out infinite alternate;
}

@keyframes gentleGlow {
    0% {
        box-shadow:
            var(--shadow-strong),
            0 0 24px rgba(218, 165, 32, 0.3),
            inset 0 0 20px rgba(218, 165, 32, 0.1);
    }
    100% {
        box-shadow:
            var(--shadow-strong),
            0 0 36px rgba(218, 165, 32, 0.5),
            inset 0 0 30px rgba(218, 165, 32, 0.15);
    }
}

/* 相邻卡片样式 */
.carrossel-item.adjacent {
    opacity: 0.7;
    border-color: rgba(212, 165, 116, 0.2);
}

/* =================================================================
   按钮样式
   ================================================================= */

/* 主要按钮 */
.btn-controle, .nature-control-btn, .control-btn {
    background: var(--gradient-card);
    border: var(--border-warm);
    color: var(--text-primary);
    border-radius: 12px;
    padding: 12px 24px;
    font-weight: 500;
    letter-spacing: 0.5px;
    cursor: pointer;
    transition: var(--gentle-transition);
    backdrop-filter: blur(15px);
    box-shadow: var(--shadow-soft);
    position: relative;
    overflow: hidden;
}

/* 按钮悬浮效果 */
.btn-controle:hover, .nature-control-btn:hover, .control-btn:hover {
    background: linear-gradient(145deg,
        rgba(77, 51, 34, 0.9) 0%,
        rgba(91, 60, 39, 0.8) 100%);
    border-color: var(--accent-glow);
    box-shadow:
        var(--shadow-medium),
        0 0 16px rgba(218, 165, 32, 0.25);
    transform: translateY(-2px);
    color: var(--accent-glow);
}

/* 按钮激活效果 */
.btn-controle:active, .nature-control-btn:active, .control-btn:active {
    transform: translateY(0);
    box-shadow: var(--shadow-soft);
}

/* 播放按钮特殊样式 */
.lotus-player, .nature-play-main {
    background: radial-gradient(circle,
        var(--accent-glow) 0%,
        var(--accent-warm) 70%);
    color: var(--bg-deepest);
    font-size: 1.2em;
    font-weight: bold;
    text-shadow: none;
    box-shadow:
        var(--shadow-medium),
        inset 0 2px 8px rgba(255, 255, 255, 0.1);
}

.lotus-player:hover, .nature-play-main:hover {
    background: radial-gradient(circle,
        rgba(218, 165, 32, 1.1) 0%,
        rgba(205, 133, 63, 1.1) 70%);
    box-shadow:
        var(--shadow-strong),
        var(--shadow-glow),
        inset 0 2px 8px rgba(255, 255, 255, 0.15);
}

/* =================================================================
   输入框和滑块样式
   ================================================================= */

/* 滑块样式 */
.nature-slider, .volume-slider, input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    height: 6px;
    border-radius: 3px;
    background: var(--overlay-dark);
    outline: none;
    transition: var(--gentle-transition);
}

/* 滑块轨道 */
.nature-slider::-webkit-slider-track,
.volume-slider::-webkit-slider-track {
    height: 6px;
    border-radius: 3px;
    background: var(--gradient-card);
    border: var(--border-soft);
}

/* 滑块拖动点 */
.nature-slider::-webkit-slider-thumb,
.volume-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: var(--accent-glow);
    cursor: pointer;
    box-shadow:
        var(--shadow-soft),
        0 0 8px rgba(218, 165, 32, 0.4);
    transition: var(--gentle-transition);
}

.nature-slider::-webkit-slider-thumb:hover,
.volume-slider::-webkit-slider-thumb:hover {
    transform: scale(1.2);
    box-shadow:
        var(--shadow-medium),
        0 0 12px rgba(218, 165, 32, 0.6);
}

/* Firefox滑块样式 */
.nature-slider::-moz-range-thumb,
.volume-slider::-moz-range-thumb {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: var(--accent-glow);
    cursor: pointer;
    border: none;
    box-shadow:
        var(--shadow-soft),
        0 0 8px rgba(218, 165, 32, 0.4);
}

/* =================================================================
   进度条样式
   ================================================================= */

.nature-progress-container {
    background: var(--overlay-dark);
    border-radius: 4px;
    height: 8px;
    overflow: hidden;
    border: var(--border-soft);
}

.progress-fill, .nature-progress-slider::-webkit-slider-thumb {
    background: linear-gradient(90deg,
        var(--accent-warm) 0%,
        var(--accent-glow) 100%);
    height: 100%;
    border-radius: 4px;
    transition: var(--gentle-transition);
    box-shadow: 0 0 8px rgba(218, 165, 32, 0.3);
}

/* =================================================================
   播放列表和音轨样式
   ================================================================= */

/* 播放列表区域 */
.playlist-section {
    background: var(--gradient-warm);
    border: var(--border-warm);
    border-radius: 20px;
    backdrop-filter: blur(25px);
    box-shadow: var(--shadow-strong);
}

/* 播放列表头部 */
.playlist-header, .organic-container {
    background: var(--overlay-medium);
    border: var(--border-warm);
    border-radius: 15px;
    backdrop-filter: blur(20px);
    box-shadow: var(--shadow-soft);
}

/* 音轨项目 */
.track-item, .audio-item {
    background: var(--overlay-light);
    border: var(--border-soft);
    border-radius: 12px;
    margin: 8px 0;
    padding: 12px 16px;
    cursor: pointer;
    transition: var(--gentle-transition);
    box-shadow: var(--shadow-soft);
}

.track-item:hover, .audio-item:hover {
    background: var(--overlay-medium);
    border-color: var(--accent-glow);
    box-shadow:
        var(--shadow-medium),
        0 0 12px rgba(218, 165, 32, 0.2);
    transform: translateY(-1px);
}

/* 正在播放的音轨 */
.track-item.playing, .audio-item.playing {
    background: linear-gradient(135deg,
        var(--accent-warm) 0%,
        var(--accent-primary) 100%);
    color: var(--text-primary);
    border-color: var(--accent-glow);
    box-shadow:
        var(--shadow-medium),
        var(--shadow-glow);
    animation: playingPulse var(--breathing-rhythm) ease-in-out infinite alternate;
}

@keyframes playingPulse {
    0% {
        box-shadow:
            var(--shadow-medium),
            0 0 16px rgba(218, 165, 32, 0.4);
    }
    100% {
        box-shadow:
            var(--shadow-medium),
            0 0 24px rgba(218, 165, 32, 0.6);
    }
}

/* =================================================================
   语言切换器样式
   ================================================================= */

.language-selector, .language-switcher {
    background: var(--overlay-medium);
    border: var(--border-warm);
    border-radius: 12px;
    backdrop-filter: blur(20px);
    box-shadow: var(--shadow-soft);
}

.language-toggle, .lang-btn {
    background: transparent;
    color: var(--text-secondary);
    border: none;
    padding: 8px 12px;
    border-radius: 8px;
    cursor: pointer;
    transition: var(--gentle-transition);
}

.language-toggle:hover, .lang-btn:hover {
    background: var(--overlay-light);
    color: var(--accent-glow);
    box-shadow: 0 0 8px rgba(218, 165, 32, 0.2);
}

.lang-btn.active {
    background: var(--accent-glow);
    color: var(--bg-deepest);
    box-shadow:
        var(--shadow-soft),
        0 0 12px rgba(218, 165, 32, 0.4);
}

/* =================================================================
   浮动控制器样式
   ================================================================= */

.floating-controls {
    background: var(--gradient-card);
    border: var(--border-warm);
    border-radius: 16px;
    backdrop-filter: blur(25px);
    box-shadow: var(--shadow-strong);
    transition: var(--gentle-transition);
}

.control-header {
    background: var(--overlay-medium);
    border-bottom: var(--border-soft);
    border-radius: 16px 16px 0 0;
    padding: 12px 16px;
    cursor: move;
}

.control-content {
    padding: 16px;
}

/* =================================================================
   时间相关样式 - 动态适应
   ================================================================= */

/* 晚间模式 (20:00-24:00) */
.evening-mode {
    filter: var(--night-mode-filter);
}

/* 深夜模式 (00:00-06:00) */
.deep-night-mode {
    filter: var(--deep-night-filter);
}

/* 呼吸动画 - 模拟自然呼吸节律 */
.breathing-element {
    animation: breathingGlow var(--breathing-rhythm) ease-in-out infinite alternate;
}

@keyframes breathingGlow {
    0% {
        opacity: 0.8;
        transform: scale(1);
    }
    100% {
        opacity: 1;
        transform: scale(1.02);
    }
}

/* =================================================================
   响应式设计
   ================================================================= */

/* 平板端适配 */
@media (max-width: 768px) {
    :root {
        /* 移动端减少滤镜强度 */
        --blue-light-filter: sepia(0.1) saturate(0.9) hue-rotate(15deg) brightness(0.9) contrast(0.95);
    }

    .carrossel-item {
        border-radius: 16px;
    }

    .btn-controle {
        padding: 10px 18px;
        font-size: 0.9rem;
    }
}

/* 手机端适配 */
@media (max-width: 480px) {
    :root {
        /* 进一步减少滤镜以保持可读性 */
        --blue-light-filter: sepia(0.08) saturate(0.95) hue-rotate(12deg) brightness(0.92);
    }

    .simple-title, .titulo {
        font-size: 1.5rem;
    }

    .carrossel-item {
        border-radius: 12px;
    }

    /* 简化阴影以提升性能 */
    .carrossel-item {
        box-shadow: 0 4px 16px rgba(139, 69, 19, 0.2);
    }

    .carrossel-item:hover {
        box-shadow: 0 6px 20px rgba(139, 69, 19, 0.3);
    }
}

/* =================================================================
   可访问性增强
   ================================================================= */

/* 高对比度模式支持 */
@media (prefers-contrast: high) {
    :root {
        --text-primary: #fff;
        --text-secondary: #f0f0f0;
        --border-warm: 2px solid rgba(255, 255, 255, 0.5);
    }
}

/* 减少动画偏好支持 */
@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* 焦点可见性增强 */
button:focus-visible,
input:focus-visible,
[tabindex]:focus-visible {
    outline: 2px solid var(--accent-glow);
    outline-offset: 2px;
}

/* =================================================================
   打印样式
   ================================================================= */
@media print {
    body {
        background: white !important;
        color: black !important;
        filter: none !important;
    }

    .carrossel-item {
        background: white !important;
        border: 1px solid #ccc !important;
        box-shadow: none !important;
    }
}