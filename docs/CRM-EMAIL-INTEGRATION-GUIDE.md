# ğŸ“§ SoundFlows CRM ä¸é‚®ä»¶è¥é”€é›†æˆæŒ‡å—

**æ›´æ–°æ—¥æœŸ**: 2025-10-18
**ç‰ˆæœ¬**: 1.0
**é€‚ç”¨äº**: SoundFlows å£°éŸ³ç–—æ„ˆå¹³å°

---

## ğŸ“‘ ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [å¹³å°é€‰æ‹©å»ºè®®](#å¹³å°é€‰æ‹©å»ºè®®)
3. [HubSpot CRM é›†æˆ](#hubspot-crm-é›†æˆ)
4. [Mailchimp é‚®ä»¶è¥é”€é›†æˆ](#mailchimp-é‚®ä»¶è¥é”€é›†æˆ)
5. [å…¶ä»–å¹³å°é›†æˆæ–¹æ¡ˆ](#å…¶ä»–å¹³å°é›†æˆæ–¹æ¡ˆ)
6. [é…ç½®æ­¥éª¤](#é…ç½®æ­¥éª¤)
7. [å­—æ®µæ˜ å°„](#å­—æ®µæ˜ å°„)
8. [æµ‹è¯•ä¸éªŒè¯](#æµ‹è¯•ä¸éªŒè¯)
9. [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)

---

## æ¦‚è¿°

SoundFlows å·²ç»å†…ç½®äº† CRM å’Œé‚®ä»¶è¥é”€è‡ªåŠ¨åŒ–çš„åŸºç¡€æ¶æ„ï¼š
- **CRM Bridge** (`assets/js/crm-bridge.js`) - å¤„ç†è¡¨å•æäº¤åˆ° CRM
- **Email Automation** (`assets/js/email-automation.js`) - å¤„ç†é‚®ä»¶è®¢é˜…å’Œè‡ªåŠ¨åŒ–æµç¨‹
- **é…ç½®æ–‡ä»¶** (`assets/js/config.js`) - é›†ä¸­ç®¡ç† API ç«¯ç‚¹å’Œå¯†é’¥

### æ ¸å¿ƒåŠŸèƒ½

1. **è¡¨å•æäº¤åˆ° CRM**
   - 7 æ—¥å®šåˆ¶å†¥æƒ³è®¡åˆ’è¡¨å• â†’ CRM è”ç³»äººåˆ›å»º
   - è‡ªåŠ¨è®°å½•ç”¨æˆ·ç›®æ ‡ã€æ—¶é—´åå¥½ç­‰è‡ªå®šä¹‰å­—æ®µ

2. **é‚®ä»¶è¥é”€è‡ªåŠ¨åŒ–**
   - èµ„æºè®¢é˜… â†’ æ·»åŠ åˆ°é‚®ä»¶åˆ—è¡¨
   - è®¡åˆ’æäº¤ â†’ è§¦å‘ 7 æ—¥é‚®ä»¶åºåˆ—
   - å†…å®¹äº’åŠ¨ â†’ è§¦å‘ä¸ªæ€§åŒ–æ¨èé‚®ä»¶

3. **æ•°æ®åŒæ­¥**
   - CRM å’Œé‚®ä»¶å¹³å°åŒå‘åŒæ­¥
   - åˆ†ææ•°æ®ï¼ˆAmplitude/GA4ï¼‰ä¸ CRM æ•°æ®æ•´åˆ

---

## å¹³å°é€‰æ‹©å»ºè®®

### CRM å¹³å°å¯¹æ¯”

| å¹³å° | æ¨èæŒ‡æ•° | ä»·æ ¼ | ä¼˜åŠ¿ | åŠ£åŠ¿ |
|------|----------|------|------|------|
| **HubSpot** | â­â­â­â­â­ | å…è´¹èµ·æ­¥<br>ä»˜è´¹ $50+/æœˆ | â€¢ å…è´¹ç‰ˆåŠŸèƒ½å¼ºå¤§<br>â€¢ åŸç”Ÿé‚®ä»¶è¥é”€<br>â€¢ æ˜“äºé›†æˆ<br>â€¢ å¼ºå¤§çš„è‡ªåŠ¨åŒ– | â€¢ é«˜çº§åŠŸèƒ½è¾ƒè´µ<br>â€¢ å­¦ä¹ æ›²çº¿ä¸­ç­‰ |
| **Salesforce** | â­â­â­â­ | $25+/ç”¨æˆ·/æœˆ | â€¢ è¡Œä¸šæ ‡å‡†<br>â€¢ é«˜åº¦å¯å®šåˆ¶<br>â€¢ å¼ºå¤§çš„æŠ¥è¡¨ | â€¢ ä»·æ ¼è¾ƒé«˜<br>â€¢ é…ç½®å¤æ‚ |
| **Pipedrive** | â­â­â­â­ | $14.90+/ç”¨æˆ·/æœˆ | â€¢ ç•Œé¢å‹å¥½<br>â€¢ ä¸“æ³¨é”€å”®æµç¨‹<br>â€¢ ä»·æ ¼é€‚ä¸­ | â€¢ é‚®ä»¶è¥é”€éœ€é¢å¤–å·¥å…· |
| **Zoho CRM** | â­â­â­ | å…è´¹èµ·æ­¥<br>ä»˜è´¹ $14+/ç”¨æˆ·/æœˆ | â€¢ æ€§ä»·æ¯”é«˜<br>â€¢ åŠŸèƒ½å…¨é¢ | â€¢ ç•Œé¢è¾ƒæ—§<br>â€¢ é›†æˆç”Ÿæ€è¾ƒå¼± |

### é‚®ä»¶è¥é”€å¹³å°å¯¹æ¯”

| å¹³å° | æ¨èæŒ‡æ•° | ä»·æ ¼ | ä¼˜åŠ¿ | åŠ£åŠ¿ |
|------|----------|------|------|------|
| **Mailchimp** | â­â­â­â­â­ | å…è´¹ 500 è”ç³»äºº<br>ä»˜è´¹ $13+/æœˆ | â€¢ å…è´¹ç‰ˆå¤Ÿç”¨<br>â€¢ æ¨¡æ¿ä¸°å¯Œ<br>â€¢ æ˜“äºä½¿ç”¨<br>â€¢ å¼ºå¤§çš„è‡ªåŠ¨åŒ– | â€¢ è¶…è¿‡å…è´¹é¢åº¦åè¾ƒè´µ |
| **SendGrid** | â­â­â­â­ | å…è´¹ 100 é‚®ä»¶/å¤©<br>ä»˜è´¹ $15+/æœˆ | â€¢ å¼€å‘è€…å‹å¥½<br>â€¢ API å¼ºå¤§<br>â€¢ é€è¾¾ç‡é«˜ | â€¢ UI è¾ƒå¤æ‚<br>â€¢ ä¾§é‡äº‹åŠ¡é‚®ä»¶ |
| **ConvertKit** | â­â­â­â­ | $9+/æœˆ (æ— å…è´¹ç‰ˆ) | â€¢ ä¸“ä¸ºå†…å®¹åˆ›ä½œè€…è®¾è®¡<br>â€¢ è‡ªåŠ¨åŒ–æµç¨‹å¼º<br>â€¢ åˆ†æ®µåŠŸèƒ½å¥½ | â€¢ æ— å…è´¹ç‰ˆ<br>â€¢ æ¨¡æ¿è¾ƒç®€å• |
| **Brevo (Sendinblue)** | â­â­â­â­ | å…è´¹ 300 é‚®ä»¶/å¤©<br>ä»˜è´¹ $25+/æœˆ | â€¢ å…è´¹ç‰ˆæ…·æ…¨<br>â€¢ å« CRM å’ŒçŸ­ä¿¡<br>â€¢ æ€§ä»·æ¯”é«˜ | â€¢ é«˜çº§åŠŸèƒ½éœ€ä»˜è´¹ |

### æ¨èç»„åˆæ–¹æ¡ˆ

#### ğŸ¥‡ æ–¹æ¡ˆ 1: HubSpotï¼ˆä¸€ä½“åŒ–ï¼Œæ¨èï¼‰
- **CRM**: HubSpot å…è´¹ç‰ˆ
- **é‚®ä»¶**: HubSpot é›†æˆé‚®ä»¶è¥é”€
- **ä¼˜åŠ¿**: ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼Œæ•°æ®æ— éœ€åŒæ­¥
- **é€‚åˆ**: åˆåˆ›å›¢é˜Ÿï¼Œé¢„ç®—æœ‰é™ï¼Œè¿½æ±‚ç®€å•é«˜æ•ˆ

#### ğŸ¥ˆ æ–¹æ¡ˆ 2: HubSpot + Mailchimpï¼ˆæœ€ä½³ç»„åˆï¼‰
- **CRM**: HubSpot å…è´¹ç‰ˆ
- **é‚®ä»¶**: Mailchimp å…è´¹ç‰ˆ
- **ä¼˜åŠ¿**: ä¸¤è€…éƒ½æœ‰å¼ºå¤§å…è´¹ç‰ˆï¼ŒMailchimp é‚®ä»¶æ¨¡æ¿æ›´ä¸°å¯Œ
- **é€‚åˆ**: éœ€è¦é«˜è´¨é‡é‚®ä»¶è¥é”€ï¼Œæ„¿æ„ç®¡ç†ä¸¤ä¸ªå¹³å°

#### ğŸ¥‰ æ–¹æ¡ˆ 3: Brevoï¼ˆä¸€ä½“åŒ–ï¼Œæ€§ä»·æ¯”ï¼‰
- **CRM**: Brevo å†…ç½® CRM
- **é‚®ä»¶**: Brevo é‚®ä»¶è¥é”€
- **ä¼˜åŠ¿**: å…è´¹é¢åº¦æœ€é«˜ï¼Œå«çŸ­ä¿¡åŠŸèƒ½
- **é€‚åˆ**: é¢„ç®—æåº¦æœ‰é™ï¼Œéœ€è¦çŸ­ä¿¡è¥é”€

---

## HubSpot CRM é›†æˆ

### ç¬¬ 1 æ­¥: åˆ›å»º HubSpot è´¦å·

1. è®¿é—® [HubSpot æ³¨å†Œé¡µé¢](https://www.hubspot.com/products/get-started)
2. é€‰æ‹© **å…è´¹ CRM** å¼€å§‹
3. å®Œæˆè´¦å·è®¾ç½®

### ç¬¬ 2 æ­¥: è·å– API å¯†é’¥

1. ç™»å½• HubSpot è´¦å·
2. å¯¼èˆªåˆ° **è®¾ç½®** â†’ **é›†æˆ** â†’ **Private Apps**
3. ç‚¹å‡» **åˆ›å»ºç§æœ‰åº”ç”¨**
4. é…ç½®æƒé™ï¼š
   - `crm.objects.contacts.write` - åˆ›å»º/æ›´æ–°è”ç³»äºº
   - `crm.objects.contacts.read` - è¯»å–è”ç³»äºº
   - `timeline` - è®°å½•æ´»åŠ¨
5. ç”Ÿæˆ **è®¿é—®ä»¤ç‰Œ**ï¼ˆç±»ä¼¼ `pat-na1-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`ï¼‰

### ç¬¬ 3 æ­¥: é…ç½® HubSpot Webhook

#### æ–¹æ³• A: ä½¿ç”¨ HubSpot Forms APIï¼ˆæ¨èï¼‰

HubSpot æä¾›åŸç”Ÿè¡¨å• APIï¼Œæ— éœ€ webhookï¼š

**API ç«¯ç‚¹**: `https://api.hsforms.com/submissions/v3/integration/submit/{portalId}/{formGuid}`

**è·å– Portal ID å’Œ Form GUID**:
1. åœ¨ HubSpot ä¸­åˆ›å»ºè¡¨å•ï¼ˆMarketing â†’ Formsï¼‰
2. Portal ID åœ¨è´¦å·è®¾ç½®ä¸­æŸ¥çœ‹ï¼ˆSettings â†’ Account Defaultsï¼‰
3. Form GUID åœ¨è¡¨å•è®¾ç½®é¡µé¢çš„ URL ä¸­

**é…ç½®ç¤ºä¾‹**ï¼ˆç›´æ¥æ›´æ–° `assets/js/config.js`ï¼‰:

```javascript
window.SITE_CONFIG = {
    // HubSpot CRM è¡¨å•æäº¤ç«¯ç‚¹
    planEndpoint: "https://api.hsforms.com/submissions/v3/integration/submit/12345678/abcd-1234-5678-efgh",
    subscribeEndpoint: "https://api.hsforms.com/submissions/v3/integration/submit/12345678/wxyz-9876-5432-ijkl",

    // é‚®ä»¶è‡ªåŠ¨åŒ–ï¼ˆå¯é€‰ï¼Œå¦‚ä½¿ç”¨ HubSpot é‚®ä»¶åŠŸèƒ½ï¼‰
    emailAutomation: {
        provider: "hubspot",
        endpoint: "", // HubSpot é€šè¿‡ CRM è‡ªåŠ¨åŒ–å¤„ç†ï¼Œç•™ç©º
        apiKey: "", // ç•™ç©º
    }
};
```

#### æ–¹æ³• B: ä½¿ç”¨ HubSpot CRM APIï¼ˆé«˜çº§ï¼‰

éœ€è¦åç«¯ä¸­é—´ä»¶å¤„ç†ï¼ˆNode.js/Python/PHPï¼‰ã€‚

**ç¤ºä¾‹åç«¯ (Node.js)**:

```javascript
// server.js
const express = require('express');
const axios = require('axios');
const app = express();

app.use(express.json());

const HUBSPOT_API_KEY = 'pat-na1-your-access-token';

app.post('/api/crm/contact', async (req, res) => {
    const { email, name, goal, time_preference } = req.body;

    try {
        const response = await axios.post(
            'https://api.hubapi.com/crm/v3/objects/contacts',
            {
                properties: {
                    email: email,
                    firstname: name.split(' ')[0],
                    lastname: name.split(' ')[1] || '',
                    meditation_goal: goal,
                    preferred_time: time_preference
                }
            },
            {
                headers: {
                    'Authorization': `Bearer ${HUBSPOT_API_KEY}`,
                    'Content-Type': 'application/json'
                }
            }
        );

        res.json({ success: true, contactId: response.data.id });
    } catch (error) {
        console.error('HubSpot API Error:', error.response?.data);
        res.status(500).json({ error: 'Failed to create contact' });
    }
});

app.listen(3000, () => console.log('Server running on port 3000'));
```

ç„¶ååœ¨ `config.js` ä¸­é…ç½®ï¼š

```javascript
window.SITE_CONFIG = {
    planEndpoint: "https://your-backend.com/api/crm/contact",
    subscribeEndpoint: "https://your-backend.com/api/crm/contact",
};
```

### ç¬¬ 4 æ­¥: åˆ›å»ºè‡ªå®šä¹‰å­—æ®µ

åœ¨ HubSpot CRM ä¸­åˆ›å»ºä»¥ä¸‹è‡ªå®šä¹‰è”ç³»äººå±æ€§ï¼š

1. **meditation_goal** (ä¸‹æ‹‰é€‰æ‹©)
   - é€‰é¡¹: `stress-relief`, `better-sleep`, `emotional-balance`, `focus`, `general-wellness`
   - æ˜¾ç¤ºå: å†¥æƒ³ç›®æ ‡

2. **preferred_time** (ä¸‹æ‹‰é€‰æ‹©)
   - é€‰é¡¹: `morning`, `midday`, `evening`, `flexible`
   - æ˜¾ç¤ºå: åå¥½æ—¶é—´

3. **plan_start_date** (æ—¥æœŸ)
   - æ˜¾ç¤ºå: è®¡åˆ’å¼€å§‹æ—¥æœŸ

4. **plan_status** (ä¸‹æ‹‰é€‰æ‹©)
   - é€‰é¡¹: `pending`, `active`, `completed`, `paused`
   - æ˜¾ç¤ºå: è®¡åˆ’çŠ¶æ€

### ç¬¬ 5 æ­¥: è®¾ç½® HubSpot å·¥ä½œæµè‡ªåŠ¨åŒ–

1. å¯¼èˆªåˆ° **Automation** â†’ **Workflows**
2. åˆ›å»º **Contact-based workflow**
3. è§¦å‘æ¡ä»¶: `meditation_goal` å·²è®¾ç½®
4. æ“ä½œ:
   - å‘é€æ¬¢è¿é‚®ä»¶
   - ç­‰å¾… 1 å¤© â†’ å‘é€ Day 1 é‚®ä»¶
   - ç­‰å¾… 1 å¤© â†’ å‘é€ Day 2 é‚®ä»¶
   - ... (ç»§ç»­ 7 å¤©åºåˆ—)

---

## Mailchimp é‚®ä»¶è¥é”€é›†æˆ

### ç¬¬ 1 æ­¥: åˆ›å»º Mailchimp è´¦å·

1. è®¿é—® [Mailchimp æ³¨å†Œé¡µé¢](https://mailchimp.com/signup/)
2. é€‰æ‹© **å…è´¹** è®¡åˆ’ï¼ˆæœ€å¤š 500 è”ç³»äººï¼‰
3. å®Œæˆè´¦å·è®¾ç½®

### ç¬¬ 2 æ­¥: è·å– API å¯†é’¥

1. ç™»å½• Mailchimp è´¦å·
2. å¯¼èˆªåˆ° **Account** â†’ **Extras** â†’ **API keys**
3. ç‚¹å‡» **Create A Key**
4. å¤åˆ¶ API å¯†é’¥ï¼ˆæ ¼å¼ç±»ä¼¼ `xxxxxxxx-usXX`ï¼‰
5. æ³¨æ„ API å¯†é’¥åç¼€ï¼ˆå¦‚ `us21`ï¼‰ï¼Œè¿™æ˜¯ä½ çš„æ•°æ®ä¸­å¿ƒä»£ç 

### ç¬¬ 3 æ­¥: åˆ›å»ºå—ä¼—åˆ—è¡¨ï¼ˆAudienceï¼‰

1. å¯¼èˆªåˆ° **Audience** â†’ **All contacts**
2. å¦‚æœæ²¡æœ‰åˆ—è¡¨ï¼Œç‚¹å‡» **Create Audience**
3. è®°å½• **Audience ID**ï¼ˆåœ¨ Audience Settings â†’ Audience name and defaults é¡µé¢ï¼‰

### ç¬¬ 4 æ­¥: é…ç½® Mailchimp API é›†æˆ

#### æ–¹æ³• A: ç›´æ¥ä½¿ç”¨ Mailchimp APIï¼ˆéœ€è¦åç«¯ï¼‰

ç”±äº CORS é™åˆ¶ï¼ŒMailchimp API æ— æ³•ç›´æ¥ä»å‰ç«¯è°ƒç”¨ï¼Œéœ€è¦åç«¯ä¸­é—´ä»¶ã€‚

**ç¤ºä¾‹åç«¯ (Node.js)**:

```javascript
// server.js
const express = require('express');
const mailchimp = require('@mailchimp/mailchimp_marketing');
const app = express();

app.use(express.json());

mailchimp.setConfig({
    apiKey: process.env.MAILCHIMP_API_KEY, // ä»ç¯å¢ƒå˜é‡è·å–
    server: process.env.MAILCHIMP_SERVER || 'us21'
});

const AUDIENCE_ID = 'abcd1234';

// è®¢é˜…èµ„æº
app.post('/api/email/subscribe', async (req, res) => {
    const { email } = req.body;

    try {
        const response = await mailchimp.lists.addListMember(AUDIENCE_ID, {
            email_address: email,
            status: 'subscribed'
        });

        res.json({ success: true, id: response.id });
    } catch (error) {
        console.error('Mailchimp Error:', error.response?.body);
        res.status(500).json({ error: 'Failed to subscribe' });
    }
});

// è§¦å‘ 7 æ—¥å†¥æƒ³è®¡åˆ’
app.post('/api/email/start-journey', async (req, res) => {
    const { email, name, goal } = req.body;

    try {
        // æ·»åŠ åˆ°åˆ—è¡¨å¹¶æ‰“æ ‡ç­¾
        const response = await mailchimp.lists.addListMember(AUDIENCE_ID, {
            email_address: email,
            status: 'subscribed',
            merge_fields: {
                FNAME: name.split(' ')[0],
                LNAME: name.split(' ')[1] || '',
                GOAL: goal
            },
            tags: ['7-day-meditation-plan']
        });

        res.json({ success: true, id: response.id });
    } catch (error) {
        console.error('Mailchimp Error:', error.response?.body);
        res.status(500).json({ error: 'Failed to start journey' });
    }
});

app.listen(3000, () => console.log('Server running on port 3000'));
```

ç„¶ååœ¨ `assets/js/config.js` ä¸­é…ç½®ï¼š

```javascript
window.SITE_CONFIG = {
    emailAutomation: {
        provider: "mailchimp",
        endpoint: "https://your-backend.com/api/email/subscribe",
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        }
    }
};
```

#### æ–¹æ³• B: ä½¿ç”¨ Zapier/Make.comï¼ˆæ— ä»£ç æ–¹æ¡ˆï¼Œæ¨èï¼‰

1. åˆ›å»º Zapier è´¦å·ï¼ˆå…è´¹ç‰ˆè¶³å¤Ÿï¼‰
2. åˆ›å»º Zap:
   - **Trigger**: Webhooks by Zapier â†’ Catch Hook
   - **Action**: Mailchimp â†’ Add/Update Subscriber
3. è·å– Webhook URLï¼ˆç±»ä¼¼ `https://hooks.zapier.com/hooks/catch/12345/abcde/`ï¼‰
4. åœ¨ `config.js` ä¸­é…ç½®ï¼š

```javascript
window.SITE_CONFIG = {
    subscribeEndpoint: "https://hooks.zapier.com/hooks/catch/12345/abcde/",
    planEndpoint: "https://hooks.zapier.com/hooks/catch/12345/fghij/",

    emailAutomation: {
        provider: "zapier",
        endpoint: "https://hooks.zapier.com/hooks/catch/12345/abcde/",
        method: "POST"
    }
};
```

### ç¬¬ 5 æ­¥: åˆ›å»º Mailchimp è‡ªåŠ¨åŒ–æµç¨‹

1. å¯¼èˆªåˆ° **Automations** â†’ **Create** â†’ **Custom**
2. é€‰æ‹©è§¦å‘æ¡ä»¶: **Tag is added** â†’ é€‰æ‹© `7-day-meditation-plan`
3. æ·»åŠ é‚®ä»¶åºåˆ—:
   - **Day 0**: æ¬¢è¿é‚®ä»¶ï¼ˆç«‹å³å‘é€ï¼‰
   - **Day 1**: ç¬¬ä¸€å¤©ç»ƒä¹ æŒ‡å¼•ï¼ˆå»¶è¿Ÿ 1 å¤©ï¼‰
   - **Day 2**: ç¬¬äºŒå¤©ç»ƒä¹ æŒ‡å¼•ï¼ˆå»¶è¿Ÿ 2 å¤©ï¼‰
   - ...
   - **Day 7**: æ€»ç»“é‚®ä»¶ï¼ˆå»¶è¿Ÿ 7 å¤©ï¼‰

---

## å…¶ä»–å¹³å°é›†æˆæ–¹æ¡ˆ

### SendGrid é›†æˆ

**ä¼˜åŠ¿**: å¼ºå¤§çš„é‚®ä»¶å‘é€ APIï¼Œé€‚åˆå¼€å‘è€…

**é…ç½®ç¤ºä¾‹**:

```javascript
window.SITE_CONFIG = {
    emailAutomation: {
        provider: "sendgrid",
        endpoint: "https://api.sendgrid.com/v3/marketing/contacts",
        method: "PUT",
        apiKey: "SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
        authScheme: "Bearer",
        headers: {
            "Content-Type": "application/json"
        }
    }
};
```

### Brevo (Sendinblue) é›†æˆ

**ä¼˜åŠ¿**: å…è´¹ç‰ˆé¢åº¦é«˜ï¼Œå« CRM å’ŒçŸ­ä¿¡åŠŸèƒ½

**é…ç½®ç¤ºä¾‹**:

```javascript
window.SITE_CONFIG = {
    emailAutomation: {
        provider: "brevo",
        endpoint: "https://api.brevo.com/v3/contacts",
        method: "POST",
        apiKey: "xkeysib-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
        authScheme: "api-key",
        headers: {
            "Content-Type": "application/json"
        },
        defaultPayload: {
            listIds: [2], // Brevo åˆ—è¡¨ ID
            updateEnabled: true
        }
    }
};
```

---

## é…ç½®æ­¥éª¤

### å®Œæ•´é…ç½®ç¤ºä¾‹ï¼ˆæ¨èï¼šHubSpot + Mailchimpï¼‰

ç¼–è¾‘ `assets/js/config.js`:

```javascript
window.SITE_CONFIG = window.SITE_CONFIG || {
    // HubSpot CRM - å¤„ç†è¡¨å•æäº¤å’Œè”ç³»äººç®¡ç†
    subscribeEndpoint: "https://api.hsforms.com/submissions/v3/integration/submit/12345678/your-subscribe-form-guid",
    planEndpoint: "https://api.hsforms.com/submissions/v3/integration/submit/12345678/your-plan-form-guid",

    // Mailchimp é‚®ä»¶è¥é”€ - å¤„ç†é‚®ä»¶è‡ªåŠ¨åŒ–
    emailAutomation: {
        provider: "mailchimp",
        endpoint: "https://your-backend.com/api/email/subscribe", // æˆ– Zapier Webhook URL
        method: "POST",
        listId: "abcd1234", // Mailchimp Audience ID
        doubleOptIn: false,
        tags: [],
        headers: {
            "Content-Type": "application/json"
        },
        authScheme: "Bearer",
        apiKey: "", // å¦‚æœä½¿ç”¨åç«¯ï¼Œç•™ç©ºï¼›åç«¯å¤„ç†è®¤è¯
        defaultPayload: {}
    },

    // è´¦å·ç³»ç»Ÿï¼ˆæœªæ¥æ‰©å±•ï¼‰
    account: {
        signupEndpoint: "",
        loginEndpoint: "",
        redirectUrl: ""
    }
};
```

---

## å­—æ®µæ˜ å°„

### è¡¨å•å­—æ®µåˆ° CRM å­—æ®µæ˜ å°„

#### 7 æ—¥å®šåˆ¶å†¥æƒ³è®¡åˆ’è¡¨å•

| å‰ç«¯è¡¨å•å­—æ®µ | å­—æ®µå | HubSpot å­—æ®µ | Mailchimp å­—æ®µ | æ•°æ®ç±»å‹ |
|-------------|--------|--------------|----------------|----------|
| å§“å | name | `firstname` + `lastname` | `FNAME` + `LNAME` | å­—ç¬¦ä¸² |
| é‚®ç®± | email | `email` | `email_address` | é‚®ç®± |
| å†¥æƒ³ç›®æ ‡ | goal | `meditation_goal` | `GOAL` | ä¸‹æ‹‰é€‰æ‹© |
| åå¥½æ—¶é—´ | time | `preferred_time` | `TIME_PREF` | ä¸‹æ‹‰é€‰æ‹© |
| æäº¤æ—¶é—´ | timestamp | `plan_start_date` | `PLAN_START` | æ—¥æœŸæ—¶é—´ |

#### èµ„æºè®¢é˜…è¡¨å•

| å‰ç«¯è¡¨å•å­—æ®µ | å­—æ®µå | HubSpot å­—æ®µ | Mailchimp å­—æ®µ | æ•°æ®ç±»å‹ |
|-------------|--------|--------------|----------------|----------|
| é‚®ç®± | email | `email` | `email_address` | é‚®ç®± |
| è®¢é˜…æ¥æº | source | `subscription_source` | `SOURCE` | å­—ç¬¦ä¸² |
| è®¢é˜…æ—¶é—´ | timestamp | `subscription_date` | `SUB_DATE` | æ—¥æœŸæ—¶é—´ |

### HubSpot è‡ªå®šä¹‰å­—æ®µåˆ›å»ºæ­¥éª¤

1. ç™»å½• HubSpot â†’ **Settings** â†’ **Properties**
2. é€‰æ‹© **Contact properties**
3. ç‚¹å‡» **Create property**
4. é…ç½®å­—æ®µ:

**å­—æ®µ 1: meditation_goal**
- Object type: Contact
- Group: Contact Information
- Label: å†¥æƒ³ç›®æ ‡
- Field type: Dropdown select
- Options:
  - `stress-relief` - å‹åŠ›ç¼“è§£
  - `better-sleep` - æ”¹å–„ç¡çœ 
  - `emotional-balance` - æƒ…ç»ªå¹³è¡¡
  - `focus` - ä¸“æ³¨åŠ›æå‡
  - `general-wellness` - æ•´ä½“å¥åº·

**å­—æ®µ 2: preferred_time**
- Object type: Contact
- Group: Contact Information
- Label: åå¥½æ—¶é—´
- Field type: Dropdown select
- Options:
  - `morning` - æ—©æ™¨ (6-9 AM)
  - `midday` - ä¸­åˆ (12-2 PM)
  - `evening` - æ™šé—´ (6-9 PM)
  - `flexible` - çµæ´»å®‰æ’

### Mailchimp åˆå¹¶å­—æ®µåˆ›å»ºæ­¥éª¤

1. ç™»å½• Mailchimp â†’ **Audience** â†’ **Settings** â†’ **Audience fields and *|MERGE|* tags**
2. ç‚¹å‡» **Add A Field**
3. é…ç½®å­—æ®µ:

**å­—æ®µ 1: GOAL**
- Field type: Dropdown
- Field label: å†¥æƒ³ç›®æ ‡
- Choices:
  - å‹åŠ›ç¼“è§£
  - æ”¹å–„ç¡çœ 
  - æƒ…ç»ªå¹³è¡¡
  - ä¸“æ³¨åŠ›æå‡
  - æ•´ä½“å¥åº·

**å­—æ®µ 2: TIME_PREF**
- Field type: Dropdown
- Field label: åå¥½æ—¶é—´
- Choices:
  - æ—©æ™¨ (6-9 AM)
  - ä¸­åˆ (12-2 PM)
  - æ™šé—´ (6-9 PM)
  - çµæ´»å®‰æ’

---

## æµ‹è¯•ä¸éªŒè¯

### æµ‹è¯•æ¸…å•

#### 1. CRM é›†æˆæµ‹è¯•

- [ ] **è”ç³»äººåˆ›å»ºæµ‹è¯•**
  1. æäº¤ 7 æ—¥å†¥æƒ³è®¡åˆ’è¡¨å•
  2. æ£€æŸ¥ HubSpot CRM ä¸­æ˜¯å¦åˆ›å»ºäº†æ–°è”ç³»äºº
  3. éªŒè¯æ‰€æœ‰å­—æ®µæ˜¯å¦æ­£ç¡®å¡«å……

- [ ] **å­—æ®µæ˜ å°„æµ‹è¯•**
  1. æäº¤è¡¨å•æ—¶é€‰æ‹©ä¸åŒçš„ç›®æ ‡å’Œæ—¶é—´
  2. éªŒè¯è‡ªå®šä¹‰å­—æ®µå€¼æ˜¯å¦æ­£ç¡®

- [ ] **é”™è¯¯å¤„ç†æµ‹è¯•**
  1. æäº¤é‡å¤é‚®ç®±ï¼ˆå·²å­˜åœ¨è”ç³»äººï¼‰
  2. éªŒè¯ç³»ç»Ÿæ˜¯å¦æ›´æ–°ç°æœ‰è”ç³»äººè€ŒéæŠ¥é”™

#### 2. é‚®ä»¶è¥é”€æµ‹è¯•

- [ ] **è®¢é˜…æµ‹è¯•**
  1. æäº¤èµ„æºè®¢é˜…è¡¨å•
  2. æ£€æŸ¥ Mailchimp ä¸­æ˜¯å¦æ·»åŠ äº†æ–°è®¢é˜…è€…
  3. éªŒè¯è®¢é˜…çŠ¶æ€ä¸º "Subscribed"

- [ ] **è‡ªåŠ¨åŒ–æµç¨‹æµ‹è¯•**
  1. æäº¤ 7 æ—¥å†¥æƒ³è®¡åˆ’è¡¨å•
  2. éªŒè¯æ˜¯å¦æ”¶åˆ°æ¬¢è¿é‚®ä»¶ï¼ˆDay 0ï¼‰
  3. æ£€æŸ¥ Mailchimp Automation ä¸­æ˜¯å¦å¯åŠ¨äº†æµç¨‹

- [ ] **æ ‡ç­¾å’Œåˆ†æ®µæµ‹è¯•**
  1. æäº¤è¡¨å•
  2. éªŒè¯è”ç³»äººæ˜¯å¦è¢«æ‰“ä¸Šæ­£ç¡®æ ‡ç­¾
  3. æ£€æŸ¥æ˜¯å¦æ·»åŠ åˆ°æ­£ç¡®çš„åˆ†æ®µåˆ—è¡¨

#### 3. ç«¯åˆ°ç«¯æµ‹è¯•

- [ ] **å®Œæ•´ç”¨æˆ·æ—…ç¨‹æµ‹è¯•**
  1. ä½œä¸ºæ–°ç”¨æˆ·è®¿é—®ç½‘ç«™
  2. æµè§ˆå†…å®¹å¹¶æäº¤èµ„æºè®¢é˜…
  3. æäº¤ 7 æ—¥å†¥æƒ³è®¡åˆ’è¡¨å•
  4. éªŒè¯:
     - HubSpot ä¸­åˆ›å»ºäº†è”ç³»äºº
     - Mailchimp ä¸­æ·»åŠ äº†è®¢é˜…è€…
     - æ”¶åˆ°äº†æ¬¢è¿é‚®ä»¶
     - Amplitude/GA4 è®°å½•äº†äº‹ä»¶

### æµ‹è¯•å·¥å…·

#### 1. Postman æµ‹è¯• API

åˆ›å»º Postman Collection æµ‹è¯• API ç«¯ç‚¹:

**æµ‹è¯• 1: HubSpot è¡¨å•æäº¤**

```
POST https://api.hsforms.com/submissions/v3/integration/submit/{portalId}/{formGuid}
Content-Type: application/json

{
  "fields": [
    { "name": "email", "value": "test@example.com" },
    { "name": "firstname", "value": "æµ‹è¯•" },
    { "name": "lastname", "value": "ç”¨æˆ·" },
    { "name": "meditation_goal", "value": "stress-relief" },
    { "name": "preferred_time", "value": "morning" }
  ],
  "context": {
    "pageUri": "https://www.soundflows.app/",
    "pageName": "SoundFlows 7 Day Plan"
  }
}
```

**æµ‹è¯• 2: Mailchimp æ·»åŠ è®¢é˜…è€…ï¼ˆé€šè¿‡åç«¯ï¼‰**

```
POST https://your-backend.com/api/email/subscribe
Content-Type: application/json

{
  "email": "test@example.com"
}
```

#### 2. æµè§ˆå™¨æ§åˆ¶å°æµ‹è¯•

åœ¨ç½‘ç«™ä¸Šæ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼Œè¿è¡Œ:

```javascript
// æµ‹è¯• CRM Bridge
window.crmBridge.sendToCrm(window.SITE_CONFIG.planEndpoint, {
    email: 'test@example.com',
    name: 'æµ‹è¯•ç”¨æˆ·',
    goal: 'stress-relief',
    time: 'morning'
});

// æµ‹è¯•é‚®ä»¶è‡ªåŠ¨åŒ–
window.emailAutomation.subscribe('test@example.com', {
    mergeFields: { FNAME: 'æµ‹è¯•', LNAME: 'ç”¨æˆ·' },
    tags: ['7-day-meditation-plan']
});
```

---

## æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

#### 1. HubSpot è¡¨å•æäº¤å¤±è´¥

**é”™è¯¯**: `403 Forbidden` æˆ– `Invalid form GUID`

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ Portal ID å’Œ Form GUID æ˜¯å¦æ­£ç¡®
- ç¡®è®¤è¡¨å•å·²åœ¨ HubSpot ä¸­åˆ›å»ºå¹¶å‘å¸ƒ
- æ£€æŸ¥è¡¨å•å­—æ®µåç§°æ˜¯å¦ä¸ HubSpot å­—æ®µåŒ¹é…

**é”™è¯¯**: `CORS policy` é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
- HubSpot Forms API æ”¯æŒ CORSï¼Œæ£€æŸ¥ API ç«¯ç‚¹æ˜¯å¦æ­£ç¡®
- å¦‚æœä½¿ç”¨ HubSpot CRM APIï¼Œéœ€è¦é€šè¿‡åç«¯è°ƒç”¨

#### 2. Mailchimp è®¢é˜…å¤±è´¥

**é”™è¯¯**: `CORS policy` é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
- Mailchimp API ä¸æ”¯æŒç›´æ¥ä»å‰ç«¯è°ƒç”¨
- ä½¿ç”¨åç«¯ä¸­é—´ä»¶æˆ– Zapier Webhook

**é”™è¯¯**: `Member already exists`

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨ `PUT` æ–¹æ³•è€Œé `POST`ï¼Œæˆ–è®¾ç½® `update_existing: true`

#### 3. è‡ªåŠ¨åŒ–æµç¨‹æœªè§¦å‘

**æ£€æŸ¥æ¸…å•**:
- [ ] ç¡®è®¤ Mailchimp Automation å·²å¯ç”¨
- [ ] æ£€æŸ¥è§¦å‘æ¡ä»¶ï¼ˆæ ‡ç­¾ã€åˆ—è¡¨ç­‰ï¼‰æ˜¯å¦æ­£ç¡®
- [ ] éªŒè¯è”ç³»äººæ˜¯å¦æˆåŠŸæ·»åŠ åˆ°åˆ—è¡¨
- [ ] æŸ¥çœ‹ Mailchimp Automation æ—¥å¿—

#### 4. å­—æ®µæ˜ å°„ä¸æ­£ç¡®

**æ£€æŸ¥æ¸…å•**:
- [ ] ç¡®è®¤ HubSpot/Mailchimp ä¸­å·²åˆ›å»ºè‡ªå®šä¹‰å­—æ®µ
- [ ] æ£€æŸ¥å­—æ®µåç§°æ˜¯å¦å®Œå…¨åŒ¹é…ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
- [ ] éªŒè¯å­—æ®µç±»å‹æ˜¯å¦å…¼å®¹

### è°ƒè¯•æŠ€å·§

#### 1. å¯ç”¨è¯¦ç»†æ—¥å¿—

åœ¨ `assets/js/crm-bridge.js` ä¸­æ·»åŠ æ—¥å¿—:

```javascript
async function sendToCrm(endpoint, payload) {
    console.log('[CRM Bridge] Sending to CRM:', { endpoint, payload });

    // ... ç°æœ‰ä»£ç  ...

    console.log('[CRM Bridge] Response:', response);
}
```

#### 2. ä½¿ç”¨ Network é¢æ¿

1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·
2. åˆ‡æ¢åˆ° **Network** é¢æ¿
3. æäº¤è¡¨å•
4. æŸ¥æ‰¾ CRM/é‚®ä»¶ API è¯·æ±‚
5. æ£€æŸ¥è¯·æ±‚å’Œå“åº”è¯¦æƒ…

#### 3. Webhook è°ƒè¯•å·¥å…·

ä½¿ç”¨ [RequestBin](https://requestbin.com/) æˆ– [Webhook.site](https://webhook.site/) æµ‹è¯• Webhook:

1. åˆ›å»ºä¸´æ—¶ Webhook URL
2. åœ¨ `config.js` ä¸­é…ç½®è¯¥ URL
3. æäº¤è¡¨å•
4. æŸ¥çœ‹ Webhook æ”¶åˆ°çš„æ•°æ®

---

## ä¸‹ä¸€æ­¥

é…ç½®å®Œæˆåï¼Œå»ºè®®:

1. **åˆ›å»ºé‚®ä»¶æ¨¡æ¿** - å‚è€ƒ `docs/EMAIL-TEMPLATES.md`
2. **é…ç½®åˆ†æè¿½è¸ª** - ç¡®ä¿ Amplitude/GA4 æ•è· CRM äº‹ä»¶
3. **è®¾ç½®å‘Šè­¦** - åœ¨ CRM ä¸­é…ç½®å¤±è´¥é€šçŸ¥
4. **å®šæœŸå®¡æŸ¥æ•°æ®** - æ¯å‘¨æ£€æŸ¥è”ç³»äººè´¨é‡å’Œé‚®ä»¶æ•ˆæœ

---

**ç»´æŠ¤è€…**: SoundFlows Marketing Team
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**æœ€åæ›´æ–°**: 2025-10-18
