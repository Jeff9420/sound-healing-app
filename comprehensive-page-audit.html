<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprehensive Page Audit</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
            background: #1a1a1a;
            color: #fff;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #444;
            border-radius: 8px;
            background: #2a2a2a;
        }
        .success { color: #4CAF50; }
        .error { color: #f44336; }
        .warning { color: #ff9800; }
        .info { color: #2196F3; }
        .page-test {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background: #333;
            border-radius: 4px;
        }
        .page-link {
            color: #64B5F6;
            text-decoration: none;
            margin-right: auto;
        }
        .page-link:hover {
            text-decoration: underline;
        }
        .status-badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }
        .status-loading {
            background: #ff9800;
            color: #fff;
        }
        .status-success {
            background: #4CAF50;
            color: #fff;
        }
        .status-error {
            background: #f44336;
            color: #fff;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 4px;
        }
        .results-summary {
            background: #1e88e5;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .test-details {
            margin-top: 10px;
            font-size: 14px;
            opacity: 0.8;
        }
        iframe {
            width: 100%;
            height: 400px;
            border: 1px solid #444;
            border-radius: 4px;
        }
        .iframe-test {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üîç Comprehensive Page Audit & Testing</h1>
        <div class="results-summary" id="summary">
            <h2>üìä Test Summary</h2>
            <p id="summaryText">Initializing...</p>
        </div>

        <div class="test-section">
            <h2>üìÑ Static HTML Pages Test</h2>
            <p>Testing all HTML pages for 404 errors and basic functionality:</p>
            <div id="pagesList"></div>
        </div>

        <div class="test-section">
            <h2>üîó Navigation & Routing Test</h2>
            <p>Testing internal links and navigation structure:</p>
            <button onclick="testNavigation()">Test Navigation</button>
            <div id="navigationResults"></div>
        </div>

        <div class="test-section">
            <h2>üåê Language Switching Test</h2>
            <p>Testing language functionality across pages:</p>
            <button onclick="testLanguageSwitching()">Test Language Switching</button>
            <div id="languageResults"></div>
        </div>

        <div class="test-section">
            <h2>üì± Mobile Responsiveness Test</h2>
            <p>Testing mobile layout and functionality:</p>
            <button onclick="testMobile()">Test Mobile View</button>
            <div id="mobileResults"></div>
        </div>

        <div class="test-section">
            <h2>üîß Functionality Test</h2>
            <p>Testing core features across all pages:</p>
            <button onclick="testFunctionality()">Test Core Features</button>
            <div id="functionalityResults"></div>
        </div>

        <div class="test-section">
            <h2>üìã Manual Test Checklist</h2>
            <div>
                <label><input type="checkbox" id="cookieSize"> Cookie banner is smaller and less intrusive</label><br>
                <label><input type="checkbox" id="pagesLoad"> All pages load without 404 errors</label><br>
                <label><input type="checkbox" id="languageWorks"> Language switching works on all pages</label><br>
                <label><input type="checkbox" id="audioWorks"> Audio playback works</label><br>
                <label><input type="checkbox" id="firebaseAuth"> Firebase authentication works</label><br>
                <label><input type="checkbox" id="mobileFriendly"> Mobile responsive design</label><br>
                <label><input type="checkbox" id="noErrors"> No console errors</label>
            </div>
        </div>
    </div>

    <script>
        const PAGES = [
            'index.html',
            'privacy-policy.html',
            'cookie-policy.html',
            'terms.html',
            '404.html',
            'sitemap.html'
        ];

        let testResults = {
            pages: {},
            navigation: false,
            language: false,
            mobile: false,
            functionality: false
        };

        // Initialize page testing
        async function initializePageTests() {
            updateSummary('Testing pages...');
            const pagesList = document.getElementById('pagesList');

            for (const page of PAGES) {
                const pageDiv = document.createElement('div');
                pageDiv.className = 'page-test';
                pageDiv.innerHTML = `
                    <a href="${page}" target="_blank" class="page-link">${page}</a>
                    <span class="status-badge status-loading" id="status-${page}">Testing...</span>
                `;
                pagesList.appendChild(pageDiv);

                // Test page
                await testPage(page);
            }

            updateSummary('Page testing complete. Check individual results below.');
        }

        async function testPage(page) {
            try {
                const response = await fetch(page, { method: 'HEAD' });
                const statusEl = document.getElementById(`status-${page}`);

                if (response.ok) {
                    statusEl.className = 'status-badge status-success';
                    statusEl.textContent = '‚úÖ OK';
                    testResults.pages[page] = true;
                } else {
                    statusEl.className = 'status-badge status-error';
                    statusEl.textContent = `‚ùå ${response.status}`;
                    testResults.pages[page] = false;
                }
            } catch (error) {
                const statusEl = document.getElementById(`status-${page}`);
                statusEl.className = 'status-badge status-error';
                statusEl.textContent = `‚ùå Error`;
                testResults.pages[page] = false;
            }
        }

        async function testNavigation() {
            updateSummary('Testing navigation...');
            const resultsDiv = document.getElementById('navigationResults');
            resultsDiv.innerHTML = '<p>Testing navigation links...</p>';

            try {
                // Test main navigation
                const indexResponse = await fetch('index.html');
                const indexText = await indexResponse.text();

                // Check for navigation elements
                const hasNav = indexText.includes('nav') || indexText.includes('navigation');
                const hasLinks = indexText.includes('href=');

                let results = `<div class="test-details">`;
                results += `<p class="${hasNav ? 'success' : 'error'}">Navigation elements found: ${hasNav ? '‚úÖ' : '‚ùå'}</p>`;
                results += `<p class="${hasLinks ? 'success' : 'error'}">Links found: ${hasLinks ? '‚úÖ' : '‚ùå'}</p>`;
                results += `</div>`;

                resultsDiv.innerHTML = results;
                testResults.navigation = hasNav && hasLinks;

                updateSummary('Navigation test complete');
            } catch (error) {
                resultsDiv.innerHTML = `<p class="error">Navigation test failed: ${error.message}</p>`;
                testResults.navigation = false;
            }
        }

        async function testLanguageSwitching() {
            updateSummary('Testing language switching...');
            const resultsDiv = document.getElementById('languageResults');
            resultsDiv.innerHTML = '<p>Testing i18n system...</p>';

            try {
                const indexResponse = await fetch('index.html');
                const indexText = await indexResponse.text();

                const hasI18n = indexText.includes('i18n-system.js') || indexText.includes('data-i18n');
                const hasLanguageSelector = indexText.includes('language') || indexText.includes('lang');

                let results = `<div class="test-details">`;
                results += `<p class="${hasI18n ? 'success' : 'error'}">i18n system found: ${hasI18n ? '‚úÖ' : '‚ùå'}</p>`;
                results += `<p class="${hasLanguageSelector ? 'success' : 'error'}">Language selector found: ${hasLanguageSelector ? '‚úÖ' : '‚ùå'}</p>`;
                results += `</div>`;

                resultsDiv.innerHTML = results;
                testResults.language = hasI18n;

                updateSummary('Language switching test complete');
            } catch (error) {
                resultsDiv.innerHTML = `<p class="error">Language test failed: ${error.message}</p>`;
                testResults.language = false;
            }
        }

        function testMobile() {
            updateSummary('Testing mobile responsiveness...');
            const resultsDiv = document.getElementById('mobileResults');

            // Simulate mobile viewport
            const originalWidth = window.innerWidth;

            let results = `<div class="test-details">`;
            results += `<p>Current viewport: ${window.innerWidth}x${window.innerHeight}</p>`;
            results += `<p class="${window.innerWidth <= 768 ? 'success' : 'info'}">Mobile breakpoint test: ${window.innerWidth <= 768 ? '‚úÖ Mobile size' : '‚û°Ô∏è Desktop size'}</p>`;
            results += `<iframe src="index.html" class="iframe-test" title="Mobile test iframe"></iframe>`;
            results += `</div>`;

            resultsDiv.innerHTML = results;
            testResults.mobile = window.innerWidth <= 768;

            updateSummary('Mobile test complete');
        }

        async function testFunctionality() {
            updateSummary('Testing core functionality...');
            const resultsDiv = document.getElementById('functionalityResults');
            resultsDiv.innerHTML = '<p>Testing features...</p>';

            try {
                const indexResponse = await fetch('index.html');
                const indexText = await indexResponse.text();

                const hasAudio = indexText.includes('audio') || indexText.includes('AudioManager');
                const hasFirebase = indexText.includes('firebase') || indexText.includes('Firebase');
                const hasCookie = indexText.includes('cookie') || indexText.includes('CookieConsent');
                const hasTheme = indexText.includes('theme') || indexText.includes('ThemeManager');

                let results = `<div class="test-details">`;
                results += `<p class="${hasAudio ? 'success' : 'error'}">Audio system: ${hasAudio ? '‚úÖ' : '‚ùå'}</p>`;
                results += `<p class="${hasFirebase ? 'success' : 'error'}">Firebase auth: ${hasFirebase ? '‚úÖ' : '‚ùå'}</p>`;
                results += `<p class="${hasCookie ? 'success' : 'error'}">Cookie consent: ${hasCookie ? '‚úÖ' : '‚ùå'}</p>`;
                results += `<p class="${hasTheme ? 'success' : 'error'}">Theme system: ${hasTheme ? '‚úÖ' : '‚ùå'}</p>`;
                results += `</div>`;

                resultsDiv.innerHTML = results;
                testResults.functionality = hasAudio && hasFirebase && hasCookie;

                updateSummary('Functionality test complete');
            } catch (error) {
                resultsDiv.innerHTML = `<p class="error">Functionality test failed: ${error.message}</p>`;
                testResults.functionality = false;
            }
        }

        function updateSummary(text) {
            document.getElementById('summaryText').textContent = text;
        }

        function generateReport() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const checkedBoxes = Array.from(checkboxes).filter(cb => cb.checked);
            const totalBoxes = checkboxes.length;
            const completionRate = Math.round((checkedBoxes.length / totalBoxes) * 100);

            alert(`Manual Test Completion: ${checkedBoxes.length}/${totalBoxes} (${completionRate}%)\n\n` +
                  'Please review all automated and manual test results before proceeding.');
        }

        // Initialize tests on page load
        document.addEventListener('DOMContentLoaded', () => {
            initializePageTests();
        });
    </script>
</body>
</html>